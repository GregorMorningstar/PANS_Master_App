import{c as Oe,u as Me,b as Ae,r as ke,j as t,a as Ce,L as Le}from"./app-DvaQrBj5.js";import{M as Ue}from"./ModeratorLayout-CpgMHDdW.js";import{B as $e}from"./app-sidebar-layout-Sqm8IYV1.js";import{C as Be}from"./ConfirmDialog-CHVKy9ad.js";/* empty css            */import"./app-logo-icon-D94uS_gU.js";import"./index-CySXUBmE.js";import"./index-Bc-c5Ken.js";import"./index-C4J_hXM0.js";import"./index-Bo-m__MM.js";function Pe(e){return e?{working:"Pracuje",breakdown:"Awaria",active:"Aktywna",inactive:"Nieaktywna",maintenance:"Serwis / konserwacja",decommissioned:"Wycofana",forced_downtime:"Postój wymuszony"}[String(e).toLowerCase()]??String(e):"-"}function Xe(){const e=Oe.c(113);let $;e[0]===Symbol.for("react.memo_cache_sentinel")?($=[{label:"Dashboard",href:"/moderator/dashboard"},{label:"Machines",href:"/moderator/machines"},{label:"Operations",href:"/moderator/machines/operations"},{label:"Edytuj",href:"/moderator/machines/operations/edit"}],e[0]=$):$=e[0];const ze=$,s=Me()?.props?.findOperation??null;let R;e[1]===Symbol.for("react.memo_cache_sentinel")?(R=window.location.pathname.match(/\/operationmachines\/(\d+)\/edit/)?.[1]??null,e[1]=R):R=e[1];const Ee=R,l=s?.id??s?.operation_id??Ee,oe=s?.operation_name??s?.operation?.name??"",re=s?.description??s?.operation?.description??"",ce=s?.duration_minutes??s?.operation?.duration_minutes??null,me=s?.changeover_time??s?.operation?.changeover_time??null;let T;e[2]!==oe||e[3]!==re||e[4]!==ce||e[5]!==me?(T={operation_name:oe,description:re,duration_minutes:ce,changeover_time:me},e[2]=oe,e[3]=re,e[4]=ce,e[5]=me,e[6]=T):T=e[6];const{data:B,setData:a,put:de,processing:W,errors:i}=Ae(T),[ue,P]=ke.useState(!1);let Z,q;e[7]!==s||e[8]!==a?(Z=()=>{s&&a({operation_name:s.operation_name??s.operation?.name??"",description:s.description??s.operation?.description??"",duration_minutes:s.duration_minutes??s.operation?.duration_minutes??null,changeover_time:s.changeover_time??s.operation?.changeover_time??null})},q=[s,a],e[7]=s,e[8]=a,e[9]=Z,e[10]=q):(Z=e[9],q=e[10]),ke.useEffect(Z,q);let F;e[11]!==l||e[12]!==de?(F=n=>{n.preventDefault(),l&&de(`/moderator/machines/operations/${l}`,{onSuccess:Te})},e[11]=l,e[12]=de,e[13]=F):F=e[13];const fe=F;let I;e[14]!==l?(I=function(){if(!l){P(!1);return}const De=`/moderator/machines/operations/${l}`;Ce.delete(De,{onStart:Re,onSuccess:()=>{P(!1),Ce.visit("/moderator/machines/operations")},onError:()=>{P(!1)}})},e[14]=l,e[15]=I):I=e[15];const he=I;let V;e[16]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx("h3",{className:"text-sm font-medium mb-3",children:"Maszyna"}),e[16]=V):V=e[16];let G;e[17]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsx("div",{className:"text-xs text-slate-500",children:"Nazwa"}),e[17]=G):G=e[17];const pe=s?.machine?.name??s?.machine_name??"-";let o;e[18]!==pe?(o=t.jsxs("div",{children:[G,t.jsx("div",{className:"font-medium",children:pe})]}),e[18]=pe,e[19]=o):o=e[19];let H;e[20]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx("div",{className:"text-xs text-slate-500",children:"Wydział"}),e[20]=H):H=e[20];const xe=s?.machine?.department?.name??s?.machine_department_name??"-";let r;e[21]!==xe?(r=t.jsxs("div",{children:[H,t.jsx("div",{className:"font-medium",children:xe})]}),e[21]=xe,e[22]=r):r=e[22];let J;e[23]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx("div",{className:"text-xs text-slate-500",children:"Barcode"}),e[23]=J):J=e[23];const _e=s?.machine?.barcode??s?.machine_barcode??"-";let c;e[24]!==_e?(c=t.jsx("div",{className:"font-medium",children:_e}),e[24]=_e,e[25]=c):c=e[25];let m;e[26]!==s?(m=s?.machine?.barcode?t.jsx("div",{className:"mt-2",children:t.jsx($e,{value:String(s.machine.barcode),format:"CODE128",width:2,height:50,displayValue:!0})}):null,e[26]=s,e[27]=m):m=e[27];let d;e[28]!==c||e[29]!==m?(d=t.jsxs("div",{children:[J,c,m]}),e[28]=c,e[29]=m,e[30]=d):d=e[30];let K;e[31]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx("div",{className:"text-xs text-slate-500",children:"Serial number"}),e[31]=K):K=e[31];const be=s?.machine?.serial_number??s?.machine_serial??"-";let u;e[32]!==be?(u=t.jsxs("div",{children:[K,t.jsx("div",{className:"font-medium",children:be})]}),e[32]=be,e[33]=u):u=e[33];let Q;e[34]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx("div",{className:"text-xs text-slate-500",children:"Status"}),e[34]=Q):Q=e[34];const je=s?.machine?.status??s?.machine_status??"";let f;e[35]!==je?(f=Pe(je),e[35]=je,e[36]=f):f=e[36];let h;e[37]!==f?(h=t.jsxs("div",{children:[Q,t.jsx("div",{className:"inline-block px-2 py-1 rounded text-sm bg-slate-100",children:f})]}),e[37]=f,e[38]=h):h=e[38];let p;e[39]!==o||e[40]!==r||e[41]!==d||e[42]!==u||e[43]!==h?(p=t.jsxs("aside",{className:"md:col-span-1 bg-white shadow p-4 rounded",children:[V,t.jsxs("div",{className:"space-y-4 text-sm",children:[o,r,d,u,h]})]}),e[39]=o,e[40]=r,e[41]=d,e[42]=u,e[43]=h,e[44]=p):p=e[44];let X;e[45]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx("h2",{className:"text-lg font-medium mb-4",children:"Edycja operacji"}),e[45]=X):X=e[45];let Y;e[46]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nazwa operacji"}),e[46]=Y):Y=e[46];const ve=B.operation_name??"";let x;e[47]!==a?(x=n=>a("operation_name",n.target.value),e[47]=a,e[48]=x):x=e[48];let _;e[49]!==ve||e[50]!==x?(_=t.jsx("input",{className:"w-full border px-3 py-2 rounded",value:ve,onChange:x,required:!0}),e[49]=ve,e[50]=x,e[51]=_):_=e[51];let b;e[52]!==i.operation_name?(b=i.operation_name&&t.jsx("div",{className:"text-xs text-red-600 mt-1",children:String(i.operation_name)}),e[52]=i.operation_name,e[53]=b):b=e[53];let j;e[54]!==_||e[55]!==b?(j=t.jsxs("div",{children:[Y,_,b]}),e[54]=_,e[55]=b,e[56]=j):j=e[56];let ee;e[57]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Opis"}),e[57]=ee):ee=e[57];const ge=B.description??"";let v;e[58]!==a?(v=n=>a("description",n.target.value),e[58]=a,e[59]=v):v=e[59];let g;e[60]!==ge||e[61]!==v?(g=t.jsx("textarea",{className:"w-full border px-3 py-2 rounded",value:ge,onChange:v,rows:4}),e[60]=ge,e[61]=v,e[62]=g):g=e[62];let y;e[63]!==i.description?(y=i.description&&t.jsx("div",{className:"text-xs text-red-600 mt-1",children:String(i.description)}),e[63]=i.description,e[64]=y):y=e[64];let N;e[65]!==g||e[66]!==y?(N=t.jsxs("div",{children:[ee,g,y]}),e[65]=g,e[66]=y,e[67]=N):N=e[67];let te;e[68]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Czas trwania (sekund)"}),e[68]=te):te=e[68];const ye=B.duration_minutes??"";let S;e[69]!==a?(S=n=>a("duration_minutes",n.target.value===""?null:Number(n.target.value)),e[69]=a,e[70]=S):S=e[70];let w;e[71]!==ye||e[72]!==S?(w=t.jsx("input",{type:"number",min:0,className:"w-full border px-3 py-2 rounded",value:ye,onChange:S}),e[71]=ye,e[72]=S,e[73]=w):w=e[73];let k;e[74]!==i.duration_minutes?(k=i.duration_minutes&&t.jsx("div",{className:"text-xs text-red-600 mt-1",children:String(i.duration_minutes)}),e[74]=i.duration_minutes,e[75]=k):k=e[75];let C;e[76]!==w||e[77]!==k?(C=t.jsxs("div",{children:[te,w,k]}),e[76]=w,e[77]=k,e[78]=C):C=e[78];let se;e[79]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Czas przezbrojenia (sekund)"}),e[79]=se):se=e[79];const Ne=B.changeover_time??"";let z;e[80]!==a?(z=n=>a("changeover_time",n.target.value===""?null:Number(n.target.value)),e[80]=a,e[81]=z):z=e[81];let E;e[82]!==Ne||e[83]!==z?(E=t.jsx("input",{type:"number",min:0,className:"w-full border px-3 py-2 rounded",value:Ne,onChange:z}),e[82]=Ne,e[83]=z,e[84]=E):E=e[84];let D;e[85]!==i.changeover_time?(D=i.changeover_time&&t.jsx("div",{className:"text-xs text-red-600 mt-1",children:String(i.changeover_time)}),e[85]=i.changeover_time,e[86]=D):D=e[86];let O;e[87]!==E||e[88]!==D?(O=t.jsxs("div",{children:[se,E,D]}),e[87]=E,e[88]=D,e[89]=O):O=e[89];let M;e[90]!==C||e[91]!==O?(M=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[C,O]}),e[90]=C,e[91]=O,e[92]=M):M=e[92];let ae;e[93]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(Le,{href:"/moderator/machines/operations",className:"px-4 py-2 border rounded",children:"Anuluj"}),e[93]=ae):ae=e[93];let ie;e[94]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx("button",{type:"button",onClick:()=>P(!0),className:"px-4 py-2 bg-red-600 text-white rounded",children:"Usuń"}),e[94]=ie):ie=e[94];const Se=W?"Zapis...":"Zapisz";let A;e[95]!==W||e[96]!==Se?(A=t.jsxs("div",{className:"flex items-center justify-between mt-4",children:[ae,t.jsxs("div",{className:"flex items-center gap-2",children:[ie,t.jsx("button",{type:"submit",disabled:W,className:"px-4 py-2 bg-blue-600 text-white rounded",children:Se})]})]}),e[95]=W,e[96]=Se,e[97]=A):A=e[97];let ne;e[98]===Symbol.for("react.memo_cache_sentinel")?(ne=()=>P(!1),e[98]=ne):ne=e[98];const we=`Czy na pewno usunąć operację "${B.operation_name??s?.operation?.name??""}"?`;let L;e[99]!==ue||e[100]!==he||e[101]!==we?(L=t.jsx(Be,{open:ue,onClose:ne,onConfirm:he,title:"Usuń operację",message:we,confirmText:"Usuń",cancelText:"Anuluj"}),e[99]=ue,e[100]=he,e[101]=we,e[102]=L):L=e[102];let U;e[103]!==fe||e[104]!==j||e[105]!==N||e[106]!==M||e[107]!==A||e[108]!==L?(U=t.jsx("main",{className:"md:col-span-2",children:t.jsxs("div",{className:"bg-white shadow p-6 rounded",children:[X,t.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[j,N,M,A,L]})]})}),e[103]=fe,e[104]=j,e[105]=N,e[106]=M,e[107]=A,e[108]=L,e[109]=U):U=e[109];let le;return e[110]!==p||e[111]!==U?(le=t.jsx(Ue,{breadcrumbs:ze,title:"Edytuj operację",children:t.jsx("div",{className:"py-8",children:t.jsxs("div",{className:"mx-auto max-w-4xl grid grid-cols-1 md:grid-cols-3 gap-6",children:[p,U]})})}),e[110]=p,e[111]=U,e[112]=le):le=e[112],le}function Re(){}function Te(){}export{Xe as default};
