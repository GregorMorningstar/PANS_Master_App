import{c as D,b as Z,r as q,j as r,u as B}from"./app-6VWvmULT.js";import{M as G}from"./ModeratorLayout-BuZ7YoP3.js";/* empty css            */import"./app-sidebar-layout-DRLK_nj4.js";import"./app-logo-icon-DrFhGwKx.js";import"./index-BCaWy0DS.js";import"./index-C2gJ1Fua.js";import"./index-C4J_hXM0.js";import"./index-DG9SYJJy.js";function O(t){const e=D.c(38),{machineId:$}=t,u=$??"";let l;e[0]!==u?(l={machine_id:u,failure_rank:1,failure_description:""},e[0]=u,e[1]=l):l=e[1];const{data:i,setData:a,post:o,processing:s,errors:n}=Z(l),[L,A]=q.useState(null);let v;e[2]===Symbol.for("react.memo_cache_sentinel")?(v={r:255,g:213,b:79},e[2]=v):v=e[2];const d=v;let w;if(e[3]===Symbol.for("react.memo_cache_sentinel")){const c={r:211,g:47,b:47};w=function(m){const R=m/9,F=Math.round(d.r+(c.r-d.r)*R),P=Math.round(d.g+(c.g-d.g)*R),H=Math.round(d.b+(c.b-d.b)*R);return`rgb(${F}, ${P}, ${H})`},e[3]=w}else w=e[3];const I=w;let M;e[4]!==o?(M=function(k){k.preventDefault(),o("/machines/failures")},e[4]=o,e[5]=M):M=e[5];const E=M;let N,S;e[6]===Symbol.for("react.memo_cache_sentinel")?(N=r.jsx("label",{className:"block mb-1 font-medium",children:"Ocena awarii"}),S=Array.from({length:10}),e[6]=N,e[7]=S):(N=e[6],S=e[7]);let f;e[8]!==i.failure_rank||e[9]!==L||e[10]!==a?(f=r.jsx("div",{children:S.map((c,k)=>{const m=k+1,F=m<=(L??i.failure_rank)?I(k):"#e0e0e0";return r.jsx("span",{onMouseEnter:()=>A(m),onMouseLeave:()=>A(null),onClick:()=>a("failure_rank",m),style:{cursor:"pointer",color:F,fontSize:24,transition:"color 120ms",marginRight:4},"aria-label":`${m} gwiazdek`,children:"★"},m)})}),e[8]=i.failure_rank,e[9]=L,e[10]=a,e[11]=f):f=e[11];let p;e[12]!==n.failure_rank?(p=n.failure_rank&&r.jsx("div",{className:"text-red-600",children:n.failure_rank}),e[12]=n.failure_rank,e[13]=p):p=e[13];let h;e[14]!==f||e[15]!==p?(h=r.jsxs("div",{className:"mb-3",children:[N,f,p]}),e[14]=f,e[15]=p,e[16]=h):h=e[16];let C;e[17]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsx("label",{className:"block mb-1 font-medium",children:"Opis usterki"}),e[17]=C):C=e[17];let b;e[18]!==a?(b=c=>a("failure_description",c.target.value),e[18]=a,e[19]=b):b=e[19];let _;e[20]!==i.failure_description||e[21]!==b?(_=r.jsx("textarea",{value:i.failure_description,onChange:b,rows:6,className:"w-full border rounded p-2",placeholder:"Opisz usterkę (co się dzieje, kiedy występuje, jak ją odtworzyć)"}),e[20]=i.failure_description,e[21]=b,e[22]=_):_=e[22];let x;e[23]!==n.failure_description?(x=n.failure_description&&r.jsx("div",{className:"text-red-600",children:n.failure_description}),e[23]=n.failure_description,e[24]=x):x=e[24];let j;e[25]!==_||e[26]!==x?(j=r.jsxs("div",{className:"mb-3",children:[C,_,x]}),e[25]=_,e[26]=x,e[27]=j):j=e[27];let g;e[28]!==i.machine_id?(g=r.jsx("input",{type:"hidden",value:i.machine_id}),e[28]=i.machine_id,e[29]=g):g=e[29];let y;e[30]!==s?(y=r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Zgłoś awarię"})}),e[30]=s,e[31]=y):y=e[31];let z;return e[32]!==E||e[33]!==h||e[34]!==j||e[35]!==g||e[36]!==y?(z=r.jsxs("form",{onSubmit:E,className:"p-4",children:[h,j,g,y]}),e[32]=E,e[33]=h,e[34]=j,e[35]=g,e[36]=y,e[37]=z):z=e[37],z}function ee(){const t=D.c(6),e=B(),$=e.props?.auth?.user?.role??"",u=String($).toLowerCase(),l=e.props?.machine_id??null;let i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=[{label:"Moderator",href:"/moderator"},{label:"Maszyny",href:"/moderator/machines"},{label:"Lista Awarii",href:"/moderator/machines/report-failure"}],t[0]=i):i=t[0];const a=i;if(u==="moderator"){let s;return t[1]!==l?(s=r.jsx(G,{breadcrumbs:a,title:"Lista Awarii",children:r.jsx(O,{machineId:l})}),t[1]=l,t[2]=s):s=t[2],s}if(u==="employee"){let s;return t[3]!==l?(s=r.jsx(r.Fragment,{children:r.jsx(O,{machineId:l})}),t[3]=l,t[4]=s):s=t[4],s}let o;return t[5]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx("div",{}),t[5]=o):o=t[5],o}export{ee as default};
