import{r as u,j as e,c as G,u as J,L as O,a as K}from"./app-DvaQrBj5.js";import{B as Q,S as U}from"./app-sidebar-layout-Sqm8IYV1.js";import{a as W}from"./app-logo-icon-D94uS_gU.js";import{W as V}from"./wrench-Du0x23TE.js";import{U as H,T as Z}from"./users-Ch_S4Xbm.js";import{P as C}from"./pen-line-BK1hmj2V.js";import{E as z}from"./eye-CCA5i3Rz.js";import{T as X}from"./trash-2-3-td9Ae_.js";import{M as Y}from"./moderator-department-nav-menu-DU6-R48w.js";import{M as ee}from"./ModeratorLayout-CpgMHDdW.js";/* empty css            */import"./index-CySXUBmE.js";import"./index-Bc-c5Ken.js";import"./index-C4J_hXM0.js";import"./index-Bo-m__MM.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],R=W("ChartNoAxesColumn",se);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]],F=W("Factory",te);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],re=W("Plus",ae);function le({departament:s,user:l,onAdd:p,onEdit:y,onDelete:n}){const a=String(s?.barcode??s?.id??s?.name??"Nazwa"),r=s?.status??"green",m=(t=>{switch(t){case"red":return{bg:"bg-red-100",text:"text-red-600"};case"yellow":return{bg:"bg-yellow-100",text:"text-yellow-600"};default:return{bg:"bg-green-100",text:"text-green-600"}}})(r),S=()=>{try{typeof p=="function"?p():console.log("Add clicked",s)}catch(t){console.error(t)}},f=()=>{try{typeof y=="function"?y():console.log("Edit clicked",s)}catch(t){console.error(t)}},E=()=>{try{const t=s?.name??"";if(!window.confirm(`Czy na pewno usunąć dział "${t}"?`))return;typeof n=="function"?n():console.log("Delete confirmed",s)}catch(t){console.error(t)}},[h,w]=u.useState(!1);return u.useEffect(()=>{const t=()=>{try{const c=window.screen?.width??window.innerWidth;w(window.innerWidth<c*.5)}catch{}};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),e.jsxs("div",{className:`w-full max-w-sm mx-auto sm:max-w-none rounded-xl border border-gray-200 bg-[#F5F1E6] shadow-sm
                 p-3 sm:p-4 flex flex-col gap-2 sm:gap-3 min-h-fit
                 overflow-hidden hover:shadow-lg transition-shadow duration-150`,children:[e.jsx("div",{className:"w-full rounded-md bg-white/90 px-2 sm:px-3 py-2 sm:py-3",children:h?e.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",title:`Kod: ${a}`,children:[e.jsx("div",{className:"bg-white p-1.5 sm:p-2 rounded shadow-sm",children:e.jsx(F,{className:"w-5 h-5 sm:w-7 sm:h-7 text-gray-700"})}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-700 truncate max-w-[80px] sm:max-w-[120px]",children:s?.name??"Nazwa"})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("div",{className:`p-1.5 sm:p-2 rounded-full ${m.bg} flex items-center justify-center`,title:r==="green"?"Status: OK":r==="yellow"?"Status: Ostrzeżenie":"Status: Awaria",children:e.jsx(F,{className:`h-4 w-4 sm:h-5 sm:w-5 ${m.text}`})}),e.jsx("button",{type:"button",className:"p-1.5 sm:p-2 rounded-md bg-white shadow-sm hover:bg-gray-50 text-gray-700 border border-gray-100","aria-label":"Szczegóły",title:"Szczegóły działu",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 sm:w-5 sm:h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M12 20.5a8.5 8.5 0 1 0 0-17 8.5 8.5 0 0 0 0 17z"})})})]})]}):e.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsxs("div",{className:"hidden md:flex flex-col items-center justify-center bg-white rounded-md p-2 shadow-sm",title:`Kod: ${a}`,children:[e.jsx("div",{className:"w-[120px] lg:w-[150px]",children:e.jsx(Q,{value:a,format:"CODE128",height:32,width:.8,displayValue:!1,margin:0,renderer:"svg",lineColor:"#111827",background:"transparent"})}),e.jsx("div",{className:"mt-1 text-xs font-mono text-gray-600 select-none text-center break-words",children:a})]}),e.jsxs("div",{className:"flex md:hidden items-center gap-2 sm:gap-3",title:`Kod: ${a}`,children:[e.jsx("div",{className:"bg-white p-1.5 sm:p-2 rounded shadow-sm",children:e.jsx(F,{className:"w-5 h-5 sm:w-7 sm:h-7 text-gray-700"})}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-700 truncate max-w-[100px] sm:max-w-[120px]",children:s?.name??"Nazwa"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("div",{className:`p-1.5 sm:p-2 rounded-full ${m.bg} flex items-center justify-center`,title:r==="green"?"Status: OK":r==="yellow"?"Status: Ostrzeżenie":"Status: Awaria",children:e.jsx(F,{className:`h-4 w-4 sm:h-5 sm:w-5 ${m.text}`})}),e.jsx("button",{type:"button",className:"p-1.5 sm:p-2 rounded-md bg-white shadow-sm hover:bg-gray-50 text-gray-700 border border-gray-100","aria-label":"Szczegóły",title:"Szczegóły działu",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 sm:w-5 sm:h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M12 20.5a8.5 8.5 0 1 0 0-17 8.5 8.5 0 0 0 0 17z"})})})]})]})}),e.jsx("div",{className:"w-full text-center px-1 sm:px-2",children:e.jsx("div",{className:"text-xs sm:text-sm lg:text-base font-semibold text-gray-800 truncate",title:s?.name??"Nazwa wydziału",children:s?.name??"Nazwa wydziału"})}),h?e.jsxs("div",{className:"flex flex-col gap-2 flex-1",children:[e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsx("div",{className:"bg-white rounded-md p-2 flex items-center justify-center",title:`Ilość maszyn: ${s.count_of_machines??0}`,children:e.jsx(V,{className:"w-6 h-6 text-indigo-500"})}),e.jsx("div",{className:"bg-white rounded-md p-2 flex items-center justify-center",title:`Ilość pracowników: ${s.count_of_employees??0}`,children:e.jsx(H,{className:"w-6 h-6 text-indigo-500"})}),e.jsx("div",{className:"bg-white rounded-md p-2 flex items-center justify-center",title:`Ilość awarii: ${s.count_of_failures??0}`,children:e.jsx(Z,{className:"w-6 h-6 text-red-400"})}),e.jsx("div",{className:"bg-white rounded-md p-2 flex items-center justify-center",title:`Współczynnik OEE: ${s.oee_coefficient??0}`,children:e.jsx(R,{className:"w-6 h-6 text-green-500"})})]}),e.jsx("div",{className:"bg-white/90 rounded-md px-2 sm:px-3 py-1.5 sm:py-2",children:e.jsx("div",{className:"flex justify-center gap-1 sm:gap-2",children:l?.role==="admin"?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"p-1.5 sm:p-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700",title:"Ustawienia",children:e.jsx(U,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),e.jsx("button",{className:"p-1.5 sm:p-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700",title:"Edytuj",children:e.jsx(C,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),e.jsx("button",{className:"p-1.5 sm:p-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700",title:"Podgląd",children:e.jsx(z,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]}):l?.role==="moderator"||l?.role==="manager"?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"p-1.5 sm:p-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700",title:"Edytuj",children:e.jsx(C,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),e.jsx("button",{className:"p-1.5 sm:p-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700",title:"Podgląd",children:e.jsx(z,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]}):e.jsx("button",{className:"p-1.5 sm:p-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700",title:"Podgląd",children:e.jsx(z,{className:"w-3 h-3 sm:w-4 sm:h-4"})})})})]}):e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3 flex-1",children:[e.jsxs("div",{className:"rounded-md bg-white p-2 sm:p-3 text-xs sm:text-sm text-gray-700 flex items-center gap-2 sm:gap-3 truncate",title:`Ilość maszyn: ${s.count_of_machines??0}`,children:[e.jsx(V,{className:"w-4 h-4 sm:w-5 sm:h-5 text-indigo-500 flex-shrink-0"}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-medium text-gray-800",children:s.count_of_machines??0}),e.jsx("span",{className:"text-xs text-gray-500",children:"Maszyny"})]})]}),e.jsxs("div",{className:"rounded-md bg-white p-2 sm:p-3 text-xs sm:text-sm text-gray-700 flex items-center gap-2 sm:gap-3 truncate",title:`Ilość pracowników: ${s.count_of_employees??0}`,children:[e.jsx(H,{className:"w-4 h-4 sm:w-5 sm:h-5 text-indigo-500 flex-shrink-0"}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-medium text-gray-800",children:s.count_of_employees??0}),e.jsx("span",{className:"text-xs text-gray-500",children:"Pracownicy"})]})]}),e.jsxs("div",{className:"rounded-md bg-white p-2 sm:p-3 text-xs sm:text-sm text-gray-700 flex items-center gap-2 sm:gap-3 truncate",title:`Ilość awarii: ${s.count_of_failures??0}`,children:[e.jsx(Z,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-400 flex-shrink-0"}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-medium text-gray-800",children:s.count_of_failures??0}),e.jsx("span",{className:"text-xs text-gray-500",children:"Awarie"})]})]}),e.jsxs("div",{className:"rounded-md bg-white p-2 sm:p-3 text-xs sm:text-sm text-gray-700 flex items-center gap-2 sm:gap-3 truncate",title:`Współczynnik OEE: ${s.oee_coefficient??0}`,children:[e.jsx(R,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-500 flex-shrink-0"}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-medium text-gray-800",children:s.oee_coefficient??0}),e.jsx("span",{className:"text-xs text-gray-500",children:"OEE"})]})]})]}),e.jsx("div",{className:"bg-white/90 rounded-md px-2 sm:px-3 py-1.5 sm:py-2",children:e.jsx("div",{className:"flex justify-center gap-1 sm:gap-2",children:l?.role==="admin"?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"p-1.5 sm:p-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700",title:"Ustawienia",children:e.jsx(U,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),e.jsx("button",{className:"p-1.5 sm:p-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700",title:"Edytuj",children:e.jsx(C,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),e.jsx("button",{className:"p-1.5 sm:p-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700",title:"Podgląd",children:e.jsx(z,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]}):l?.role==="moderator"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:S,className:"p-1.5 sm:p-2 rounded-md bg-green-100 hover:bg-green-200 text-green-700",title:"Dodaj",children:e.jsx(re,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),e.jsx("button",{onClick:f,className:"p-1.5 sm:p-2 rounded-md bg-blue-100 hover:bg-blue-200 text-blue-700",title:"Edycja",children:e.jsx(C,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),e.jsx("button",{onClick:E,className:"p-1.5 sm:p-2 rounded-md bg-red-100 hover:bg-red-200 text-red-700",title:"Usuń",children:e.jsx(X,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]}):l?.role==="manager"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:f,className:"p-1.5 sm:p-2 rounded-md bg-blue-100 hover:bg-blue-200 text-blue-700",title:"Edytuj",children:e.jsx(C,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),e.jsx("button",{className:"p-1.5 sm:p-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700",title:"Podgląd",children:e.jsx(z,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]}):e.jsx("button",{className:"p-1.5 sm:p-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700",title:"Podgląd",children:e.jsx(z,{className:"w-3 h-3 sm:w-4 sm:h-4"})})})}),e.jsx("div",{className:"w-full rounded-md bg-white/90 px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm text-gray-700 leading-tight overflow-hidden",style:{maxHeight:40},children:e.jsx("div",{className:"truncate",children:s?.description??"Brak opisu"})})]})}function _e(){const s=G.c(40);let l;s[0]===Symbol.for("react.memo_cache_sentinel")?(l=[{label:"Moderator",href:"/moderator"},{label:"Działy",href:"/moderator/departments"}],s[0]=l):l=s[0];const p=l,n=J().props,a=n.success,r=n.error,o=n.department_id??n.departmentId??null,[m,S]=u.useState(!!a),[f,E]=u.useState(!!r);let h,w;s[1]!==a?(h=()=>{if(S(!!a),a){const _=setTimeout(()=>S(!1),5e3);return()=>clearTimeout(_)}},w=[a],s[1]=a,s[2]=h,s[3]=w):(h=s[2],w=s[3]),u.useEffect(h,w);let t,c;s[4]!==r?(t=()=>{if(E(!!r),r){const _=setTimeout(()=>E(!1),5e3);return()=>clearTimeout(_)}},c=[r],s[4]=r,s[5]=t,s[6]=c):(t=s[5],c=s[6]),u.useEffect(t,c);let M;s[7]!==n.departaments||s[8]!==n.departments?(M=n.departaments??n.departments??[],s[7]=n.departaments,s[8]=n.departments,s[9]=M):M=s[9];const i=M,g=i&&!Array.isArray(i)&&!!i.data;let P;s[10]!==g||s[11]!==i?(P=g?i.data??[]:Array.isArray(i)?i:[],s[10]=g,s[11]=i,s[12]=P):P=s[12];const x=P,[d,T]=u.useState(1),$=Math.max(1,Math.ceil(x.length/6));let I;s[13]!==x||s[14]!==d?(I=x.slice((d-1)*6,d*6),s[13]=x,s[14]=d,s[15]=I):I=s[15];const A=g?x:I;let L;s[16]===Symbol.for("react.memo_cache_sentinel")?(L=e.jsx(Y,{}),s[16]=L):L=s[16];let j;s[17]!==o||s[18]!==m||s[19]!==a?(j=m&&a&&e.jsx("div",{className:"mx-4 my-4",children:e.jsxs("div",{className:"relative rounded-md bg-green-50 p-3 text-green-800 border border-green-100",children:[e.jsx("button",{onClick:()=>S(!1),"aria-label":"Zamknij komunikat sukcesu",className:"absolute top-1 right-1 text-green-600 hover:text-green-800",children:"×"}),e.jsx("div",{className:"pr-12",children:a}),o&&e.jsx("div",{className:"mt-2",children:e.jsx(O,{href:`/moderator/departments/${o}`,className:"inline-flex items-center gap-2 px-3 py-1 rounded bg-indigo-600 text-white text-sm",children:"Szczegóły"})})]})}),s[17]=o,s[18]=m,s[19]=a,s[20]=j):j=s[20];let b;s[21]!==o||s[22]!==r||s[23]!==f?(b=f&&r&&e.jsx("div",{className:"mx-4 my-4",children:e.jsxs("div",{className:"relative rounded-md bg-red-50 p-3 text-red-800 border border-red-100",children:[e.jsx("button",{onClick:()=>E(!1),"aria-label":"Zamknij komunikat błędu",className:"absolute top-1 right-1 text-red-600 hover:text-red-800",children:"×"}),e.jsx("div",{className:"pr-12",children:r}),o&&e.jsx("div",{className:"mt-2",children:e.jsx(O,{href:`/moderator/departments/${o}`,className:"inline-flex items-center gap-2 px-3 py-1 rounded bg-indigo-600 text-white text-sm",children:"Szczegóły"})})]})}),s[21]=o,s[22]=r,s[23]=f,s[24]=b):b=s[24];let N;s[25]!==A?(N=e.jsx("div",{className:"p-4",children:A.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 justify-items-center mx-4 my-6",children:A.map(oe)}):e.jsx("p",{className:"text-gray-500 mx-4 my-6",children:"Brak wydziałów do wyświetlenia."})}),s[25]=A,s[26]=N):N=s[26];let v;s[27]!==g||s[28]!==x.length||s[29]!==d||s[30]!==i||s[31]!==$?(v=g&&i.links?e.jsx("div",{className:"inline-flex items-center gap-2 bg-white shadow-lg rounded-full px-3 py-2 text-sm text-gray-800",children:i.links.map(ie)}):x.length>6&&e.jsxs("div",{className:"inline-flex items-center gap-2 bg-white shadow-lg rounded-full px-3 py-2 text-sm text-gray-800",children:[e.jsx("button",{onClick:()=>T(ne),disabled:d===1,className:"px-3 py-1 rounded-full hover:bg-gray-100 disabled:opacity-50",children:"Prev"}),Array.from({length:$}).map((_,q)=>{const D=q+1;return e.jsx("button",{onClick:()=>T(D),className:`px-3 py-1 rounded-full ${d===D?"bg-indigo-600 text-white":"hover:bg-gray-100"}`,children:D},D)}),e.jsx("button",{onClick:()=>T(_=>Math.min($,_+1)),disabled:d===$,className:"px-3 py-1 rounded-full hover:bg-gray-100 disabled:opacity-50",children:"Next"})]}),s[27]=g,s[28]=x.length,s[29]=d,s[30]=i,s[31]=$,s[32]=v):v=s[32];let k;s[33]!==v?(k=e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:v}),s[33]=v,s[34]=k):k=s[34];let B;return s[35]!==b||s[36]!==N||s[37]!==k||s[38]!==j?(B=e.jsxs(ee,{breadcrumbs:p,title:"Działy",children:[L,j,b,N,k]}),s[35]=b,s[36]=N,s[37]=k,s[38]=j,s[39]=B):B=s[39],B}function ne(s){return Math.max(1,s-1)}function ie(s,l){const p=!s.url,y=!!s.active;return e.jsx(O,{href:s.url??"#",className:`inline-flex items-center justify-center px-3 py-1 rounded-full transition-colors duration-150
                            ${y?"bg-indigo-600 text-white shadow-md scale-105":"bg-white/0 text-gray-800 hover:bg-gray-100"}
                            ${p?"opacity-50 pointer-events-none":""}`,dangerouslySetInnerHTML:{__html:s.label},"aria-current":y?"page":void 0},l)}function oe(s){return e.jsx(le,{user:{role:"moderator"},departament:s,onEdit:()=>K.visit(`/moderator/departments/${s.id}/edit`),onDelete:()=>K.delete(`/moderator/departments/${s.id}`)},s.id)}export{_e as default};
