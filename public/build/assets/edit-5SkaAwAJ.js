import{c as ve,u as De,r as ne,j as t,a as _e}from"./app-DvaQrBj5.js";import{E as ke}from"./EmployeeLayout-DU17fydJ.js";import{F as m,f as ye,j as Se,k as Ee,l as Fe,e as Ce,h as Te}from"./index-Bo-m__MM.js";/* empty css            */import"./app-sidebar-layout-Sqm8IYV1.js";import"./app-logo-icon-D94uS_gU.js";import"./index-CySXUBmE.js";import"./index-Bc-c5Ken.js";import"./index-C4J_hXM0.js";const je={annual:"Urlop wypoczynkowy",sick:"Urlop zdrowotny",unpaid:"Urlop bezpłatny",parental:"Urlop rodzicielski",compassionate:"Urlop okolicznościowy",on_demand:"Urlop na żądanie"};function Me(){const e=ve.c(114),{leave:r}=De().props,u=r.description||"";let f;e[0]!==r.end_date||e[1]!==r.start_date||e[2]!==r.type||e[3]!==u?(f={start_date:r.start_date,end_date:r.end_date,type:r.type,description:u},e[0]=r.end_date,e[1]=r.start_date,e[2]=r.type,e[3]=u,e[4]=f):f=e[4];const[s,B]=ne.useState(f);let d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d={},e[5]=d):d=e[5];const[l,b]=ne.useState(d),[a,p]=ne.useState(!1),[n,oe]=ne.useState(!1);let H;e[6]===Symbol.for("react.memo_cache_sentinel")?(H=[{label:"Panel pracownika",href:"employee.dashboard"},{label:"Kalendarz",href:"employee.calendar.index"},{label:"Edycja urlopu",href:"#"}],e[6]=H):H=e[6];const we=H;let K;e[7]!==l?(K=(o,c)=>{B(Z=>({...Z,[o]:c})),l[o]&&b(Z=>({...Z,[o]:null}))},e[7]=l,e[8]=K):K=e[8];const i=K,he=Pe;let M;e[9]!==s||e[10]!==r.id?(M=o=>{o.preventDefault(),p(!0),b({});const c={};if(s.start_date||(c.start_date="Data rozpoczęcia jest wymagana"),s.end_date||(c.end_date="Data zakończenia jest wymagana"),s.type||(c.type="Typ urlopu jest wymagany"),s.start_date&&s.end_date){const re=new Date(s.start_date),ze=new Date(s.end_date);re>ze&&(c.end_date="Data zakończenia musi być późniejsza niż data rozpoczęcia");const ge=new Date;ge.setHours(0,0,0,0),s.type!=="sick"&&s.type!=="compassionate"&&re<ge&&(c.start_date="Data rozpoczęcia nie może być wcześniejsza niż dzisiejsza")}if(Object.keys(c).length>0){b(c),p(!1);return}const Z={...s,working_days_count:he(s.start_date,s.end_date),_method:"PUT"};_e.put(`/employee/calendar/update/${r.id}`,Z,{onSuccess:Le,onError:re=>{b(re),p(!1)},onFinish:()=>{p(!1)}})},e[9]=s,e[10]=r.id,e[11]=M):M=e[11];const ie=M;let V;e[12]!==r.id?(V=()=>{window.location.href=`/employee/calendar/show/${r.id}`},e[12]=r.id,e[13]=V):V=e[13];const de=V;let Y;e[14]!==r.id||e[15]!==n?(Y=()=>{if(!n){oe(!0);return}p(!0),_e.delete(`/employee/calendar/delete/${r.id}`,{onSuccess:$e,onError:o=>{console.error("Błąd podczas usuwania urlopu:",o),p(!1),oe(!1)},onFinish:()=>{p(!1)}})},e[14]=r.id,e[15]=n,e[16]=Y):Y=e[16];const ce=Y,q=s.start_date&&s.end_date?he(s.start_date,s.end_date):0;let G;e[17]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 rounded-t-lg",children:[t.jsxs("h2",{className:"text-2xl font-bold flex items-center",children:[t.jsx(m,{icon:ye,className:"mr-3"}),"Edycja urlopu"]}),t.jsx("p",{className:"mt-2 text-blue-100",children:"Możesz edytować datę, typ i opis urlopu oczekującego na zatwierdzenie"})]}),e[17]=G):G=e[17];let J;e[18]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsxs("label",{htmlFor:"start_date",className:"block text-sm font-medium text-gray-700 mb-2",children:[t.jsx(m,{icon:ye,className:"mr-2 text-blue-600"}),"Data rozpoczęcia"]}),e[18]=J):J=e[18];let x;e[19]!==i?(x=o=>i("start_date",o.target.value),e[19]=i,e[20]=x):x=e[20];const me=`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition ${l.start_date?"border-red-500 bg-red-50":"border-gray-300"}`;let y;e[21]!==s.start_date||e[22]!==a||e[23]!==x||e[24]!==me?(y=t.jsx("input",{type:"date",id:"start_date",value:s.start_date,onChange:x,className:me,disabled:a}),e[21]=s.start_date,e[22]=a,e[23]=x,e[24]=me,e[25]=y):y=e[25];let h;e[26]!==l.start_date?(h=l.start_date&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.start_date}),e[26]=l.start_date,e[27]=h):h=e[27];let g;e[28]!==y||e[29]!==h?(g=t.jsxs("div",{children:[J,y,h]}),e[28]=y,e[29]=h,e[30]=g):g=e[30];let Q;e[31]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsxs("label",{htmlFor:"end_date",className:"block text-sm font-medium text-gray-700 mb-2",children:[t.jsx(m,{icon:ye,className:"mr-2 text-blue-600"}),"Data zakończenia"]}),e[31]=Q):Q=e[31];let _;e[32]!==i?(_=o=>i("end_date",o.target.value),e[32]=i,e[33]=_):_=e[33];const ue=`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition ${l.end_date?"border-red-500 bg-red-50":"border-gray-300"}`;let j;e[34]!==s.end_date||e[35]!==a||e[36]!==_||e[37]!==ue?(j=t.jsx("input",{type:"date",id:"end_date",value:s.end_date,onChange:_,className:ue,disabled:a}),e[34]=s.end_date,e[35]=a,e[36]=_,e[37]=ue,e[38]=j):j=e[38];let w;e[39]!==l.end_date?(w=l.end_date&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.end_date}),e[39]=l.end_date,e[40]=w):w=e[40];let N;e[41]!==j||e[42]!==w?(N=t.jsxs("div",{children:[Q,j,w]}),e[41]=j,e[42]=w,e[43]=N):N=e[43];let z;e[44]!==g||e[45]!==N?(z=t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g,N]}),e[44]=g,e[45]=N,e[46]=z):z=e[46];let X;e[47]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsxs("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-2",children:[t.jsx(m,{icon:Se,className:"mr-2 text-blue-600"}),"Typ urlopu"]}),e[47]=X):X=e[47];const Ne=s.type;let v;e[48]!==i?(v=o=>i("type",o.target.value),e[48]=i,e[49]=v):v=e[49];const pe=`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition ${l.type?"border-red-500 bg-red-50":"border-gray-300"}`;let ee,te;e[50]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx("option",{value:"",children:"Wybierz typ urlopu"}),te=Object.entries(je).map(Ue),e[50]=ee,e[51]=te):(ee=e[50],te=e[51]);let D;e[52]!==s.type||e[53]!==a||e[54]!==v||e[55]!==pe?(D=t.jsxs("select",{id:"type",value:Ne,onChange:v,className:pe,disabled:a,children:[ee,te]}),e[52]=s.type,e[53]=a,e[54]=v,e[55]=pe,e[56]=D):D=e[56];let k;e[57]!==l.type?(k=l.type&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.type}),e[57]=l.type,e[58]=k):k=e[58];let S;e[59]!==D||e[60]!==k?(S=t.jsxs("div",{children:[X,D,k]}),e[59]=D,e[60]=k,e[61]=S):S=e[61];let se;e[62]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:[t.jsx(m,{icon:Ee,className:"mr-2 text-blue-600"}),"Opis (opcjonalny)"]}),e[62]=se):se=e[62];let E;e[63]!==i?(E=o=>i("description",o.target.value),e[63]=i,e[64]=E):E=e[64];const fe=`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition resize-none ${l.description?"border-red-500 bg-red-50":"border-gray-300"}`;let F;e[65]!==s.description||e[66]!==a||e[67]!==E||e[68]!==fe?(F=t.jsx("textarea",{id:"description",rows:4,value:s.description,onChange:E,className:fe,placeholder:"Dodaj opis lub powód urlopu...",disabled:a,maxLength:1e3}),e[65]=s.description,e[66]=a,e[67]=E,e[68]=fe,e[69]=F):F=e[69];let C;e[70]!==l.description?(C=l.description&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.description}),e[70]=l.description,e[71]=C):C=e[71];let T;e[72]!==s.description.length?(T=t.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[s.description.length,"/1000 znaków"]}),e[72]=s.description.length,e[73]=T):T=e[73];let U;e[74]!==F||e[75]!==C||e[76]!==T?(U=t.jsxs("div",{children:[se,F,C,T]}),e[74]=F,e[75]=C,e[76]=T,e[77]=U):U=e[77];let $;e[78]!==s.type||e[79]!==q?($=q>0&&t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Podsumowanie urlopu"}),t.jsxs("div",{className:"text-sm text-blue-700",children:[t.jsxs("p",{children:["Liczba dni roboczych: ",t.jsx("span",{className:"font-semibold",children:q})]}),t.jsxs("p",{children:["Typ urlopu: ",t.jsx("span",{className:"font-semibold",children:s.type?je[s.type]:"Nie wybrano"})]})]})]}),e[78]=s.type,e[79]=q,e[80]=$):$=e[80];let L;e[81]!==a||e[82]!==n?(L=a&&!n?t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Zapisywanie..."]}):t.jsxs(t.Fragment,{children:[t.jsx(m,{icon:Fe,className:"mr-2"}),"Zapisz zmiany"]}),e[81]=a,e[82]=n,e[83]=L):L=e[83];let P;e[84]!==a||e[85]!==L?(P=t.jsx("button",{type:"submit",disabled:a,className:"flex-1 flex items-center justify-center px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:ring-2 focus:ring-green-500 transition font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:L}),e[84]=a,e[85]=L,e[86]=P):P=e[86];const be=`flex-1 flex items-center justify-center px-6 py-3 rounded-lg focus:ring-2 transition font-medium disabled:opacity-50 ${n?"bg-red-700 text-white hover:bg-red-800 focus:ring-red-500":"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}`;let O;e[87]!==a||e[88]!==n?(O=a&&n?t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Usuwanie..."]}):t.jsxs(t.Fragment,{children:[t.jsx(m,{icon:Ce,className:"mr-2"}),n?"Potwierdź usunięcie":"Usuń wniosek"]}),e[87]=a,e[88]=n,e[89]=O):O=e[89];let A;e[90]!==ce||e[91]!==a||e[92]!==be||e[93]!==O?(A=t.jsx("button",{type:"button",onClick:ce,disabled:a,className:be,children:O}),e[90]=ce,e[91]=a,e[92]=be,e[93]=O,e[94]=A):A=e[94];let I;e[95]!==de||e[96]!==n?(I=()=>{n?oe(!1):de()},e[95]=de,e[96]=n,e[97]=I):I=e[97];let ae;e[98]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(m,{icon:Te,className:"mr-2"}),e[98]=ae):ae=e[98];const xe=n?"Anuluj usuwanie":"Anuluj";let W;e[99]!==a||e[100]!==I||e[101]!==xe?(W=t.jsxs("button",{type:"button",onClick:I,disabled:a,className:"flex-1 flex items-center justify-center px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 focus:ring-2 focus:ring-gray-500 transition font-medium disabled:opacity-50",children:[ae,xe]}),e[99]=a,e[100]=I,e[101]=xe,e[102]=W):W=e[102];let R;e[103]!==P||e[104]!==A||e[105]!==W?(R=t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-6 border-t border-gray-200",children:[P,A,W]}),e[103]=P,e[104]=A,e[105]=W,e[106]=R):R=e[106];let le;return e[107]!==ie||e[108]!==z||e[109]!==S||e[110]!==U||e[111]!==$||e[112]!==R?(le=t.jsx(ke,{title:"Edycja urlopu",breadcrumbs:we,children:t.jsx("div",{className:"max-w-4xl mx-auto p-6",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg",children:[G,t.jsxs("form",{onSubmit:ie,className:"p-6 space-y-6",children:[z,S,U,$,R]})]})})}),e[107]=ie,e[108]=z,e[109]=S,e[110]=U,e[111]=$,e[112]=R,e[113]=le):le=e[113],le}function Ue(e){const[r,u]=e;return t.jsx("option",{value:r,children:u},r)}function $e(){window.location.href="/employee/calendar"}function Le(){window.location.href="/employee/calendar"}function Pe(e,r){const u=new Date(e),f=new Date(r),s=["2025-01-01","2025-01-06","2025-05-01","2025-05-03","2025-08-15","2025-11-01","2025-11-11","2025-12-25","2025-12-26"];let B=0;for(const d=new Date(u);d<=f;d.setDate(d.getDate()+1)){const l=d.getDay(),b=d.toISOString().split("T")[0];l!==0&&l!==6&&!s.includes(b)&&B++}return B}export{Me as default};
