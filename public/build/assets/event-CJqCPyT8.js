import{c as st,u as lt,b as at,r as $e,j as t}from"./app-6VWvmULT.js";import{F as Ye,j as nt,h as ot,k as it}from"./index-DG9SYJJy.js";/* empty css            */const rt={annual:"Urlop wypoczynkowy",sick:"Urlop zdrowotny",unpaid:"Urlop bezpłatny",parental:"Urlop rodzicielski",compassionate:"Urlop okolicznościowy",on_demand:"Urlop na żądanie"},ct={annual:"#16a34a",sick:"#ef4444",unpaid:"#6b7280",parental:"#7c3aed",compassionate:"#000000",on_demand:"#7b1120"};function ht(i){const e=st.c(152),{event:o,onClose:c,user:f,messageAutoCloseMs:ae}=i,{props:u}=lt();let oe;e[0]!==u?.auth?.user||e[1]!==f?(oe=f??u?.auth?.user??{},e[0]=u?.auth?.user,e[1]=f,e[2]=oe):oe=e[2];const Se=oe,Me=ut;let x;e[3]!==o?.start?(x=o?.start?.toString().split("T")[0]||"",e[3]=o?.start,e[4]=x):x=e[4];let b;e[5]!==o?.end?(b=o?.end?.toString().split("T")[0]||"",e[5]=o?.end,e[6]=b):b=e[6];const Ee=o?.type_label||"annual",Ce=o?.description||"",Te=o?.workingDays?.length||1,Ue=Se?.id||"";let ie;e[7]!==x||e[8]!==b||e[9]!==Ee||e[10]!==Ce||e[11]!==Te||e[12]!==Ue?(ie={start_date:x,end_date:b,leave_type:Ee,description:Ce,working_days_count:Te,user_id:Ue},e[7]=x,e[8]=b,e[9]=Ee,e[10]=Ce,e[11]=Te,e[12]=Ue,e[13]=ie):ie=e[13];const{data:s,setData:Oe,post:Pe,processing:l,errors:n}=at(ie);let re;e[14]===Symbol.for("react.memo_cache_sentinel")?(re=[],e[14]=re):re=e[14];const[ne,Ze]=$e.useState(re),qe=$e.useRef(null);let ce,de;e[15]===Symbol.for("react.memo_cache_sentinel")?(ce=()=>()=>{qe.current&&window.clearTimeout(qe.current)},de=[],e[15]=ce,e[16]=de):(ce=e[15],de=e[16]),$e.useEffect(ce,de);const Ke=ft;let me;e[17]===Symbol.for("react.memo_cache_sentinel")?(me=(a,p,ze)=>{const d=[];if(!a||!p)return Ze(d),!0;const se=new Date;se.setHours(0,0,0,0);const De=new Date(a);De.setHours(0,0,0,0);const Be=new Date(p);Be.setHours(0,0,0,0);const et=["sick","on_demand","compassionate"],tt=["sick","on_demand","compassionate"];if(et.includes(ze)||(De<se&&d.push("⚠️ Data rozpoczęcia nie może być w przeszłości"),Be<se&&d.push("⚠️ Data zakończenia nie może być w przeszłości")),Be<De&&d.push("⚠️ Data zakończenia nie może być przed datą rozpoczęcia"),!tt.includes(ze)){let He=0;const le=new Date(se);for(le.setDate(le.getDate()+1);le<=De;){const Je=le.getDay();Je!==0&&Je!==6&&He++,le.setDate(le.getDate()+1)}He<3&&d.push(`⚠️ Urlop musi być zgłoszony co najmniej 3 dni robocze przed rozpoczęciem (obecnie ${He})`)}return Ze(d),d.length===0},e[17]=me):me=e[17];const Ge=me;let pe;e[18]!==s.end_date||e[19]!==s.leave_type||e[20]!==s.start_date||e[21]!==Oe?(pe=(a,p)=>{if(Oe(a,p),a==="start_date"||a==="end_date"||a==="leave_type"){const ze=a==="start_date"?p:s.start_date,d=a==="end_date"?p:s.end_date,se=a==="leave_type"?p:s.leave_type;Ge(ze,d,se)}},e[18]=s.end_date,e[19]=s.leave_type,e[20]=s.start_date,e[21]=Oe,e[22]=pe):pe=e[22];const r=pe;let fe;e[23]!==s.end_date||e[24]!==s.leave_type||e[25]!==s.start_date||e[26]!==c||e[27]!==Pe?(fe=()=>{Ge(s.start_date,s.end_date,s.leave_type)&&Pe("/employee/calendar/store",{onSuccess:()=>{c?.()},onError:pt})},e[23]=s.end_date,e[24]=s.leave_type,e[25]=s.start_date,e[26]=c,e[27]=Pe,e[28]=fe):fe=e[28];const Le=fe;if(!o)return null;const m=ct[s.leave_type]||"#0f172a",Re=Ke(s.start_date,s.end_date),Ae=`5px solid ${m}`;let _;e[29]!==Ae?(_={borderLeft:Ae},e[29]=Ae,e[30]=_):_=e[30];let h;e[31]!==m?(h={backgroundColor:m},e[31]=m,e[32]=h):h=e[32];let ue;e[33]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx("h2",{className:"text-xl font-bold text-white",children:"Wniosek urlopu"}),e[33]=ue):ue=e[33];let xe;e[34]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx(Ye,{icon:ot,size:"lg"}),e[34]=xe):xe=e[34];let y;e[35]!==c||e[36]!==l?(y=t.jsxs("div",{className:"flex items-center justify-between",children:[ue,t.jsx("button",{onClick:c,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition","aria-label":"Zamknij",disabled:l,children:xe})]}),e[35]=c,e[36]=l,e[37]=y):y=e[37];let g;e[38]!==h||e[39]!==y?(g=t.jsx("div",{className:"bg-gradient-to-r p-4",style:h,children:y}),e[38]=h,e[39]=y,e[40]=g):g=e[40];let be;e[41]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsx("p",{className:"text-xs font-medium text-slate-600 uppercase tracking-wide",children:"Pracownik"}),e[41]=be):be=e[41];const Fe=Se?.name||"Brak danych";let j;e[42]!==Fe?(j=t.jsxs("div",{children:[be,t.jsx("p",{className:"text-lg font-semibold text-slate-900 mt-1",children:Fe})]}),e[42]=Fe,e[43]=j):j=e[43];let _e;e[44]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx("p",{className:"text-xs font-medium text-slate-600 uppercase tracking-wide",children:"Email"}),e[44]=_e):_e=e[44];const Ie=Se?.email||"Brak danych";let w;e[45]!==Ie?(w=t.jsxs("div",{className:"text-right",children:[_e,t.jsx("p",{className:"text-sm font-semibold text-slate-900 mt-1",children:Ie})]}),e[45]=Ie,e[46]=w):w=e[46];let v;e[47]!==j||e[48]!==w?(v=t.jsx("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 mb-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[j,w]})}),e[47]=j,e[48]=w,e[49]=v):v=e[49];let N;e[50]!==ne?(N=ne.length>0&&t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[t.jsxs("div",{className:"flex gap-2 mb-2",children:[t.jsx(Ye,{icon:nt,className:"text-yellow-600 mt-1"}),t.jsx("p",{className:"text-sm font-semibold text-yellow-900",children:"Ostrzeżenia:"})]}),t.jsx("ul",{className:"space-y-1",children:ne.map(mt)})]}),e[50]=ne,e[51]=N):N=e[51];let he;e[52]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Data rozpoczęcia"}),e[52]=he):he=e[52];const Qe=s.start_date;let k;e[53]!==r?(k=a=>r("start_date",a.target.value),e[53]=r,e[54]=k):k=e[54];let z;e[55]===Symbol.for("react.memo_cache_sentinel")?(z=new Date().toISOString().split("T"),e[55]=z):z=e[55];let D;e[56]!==s.start_date||e[57]!==l||e[58]!==k||e[59]!==z[0]?(D=t.jsx("input",{type:"date",value:Qe,onChange:k,disabled:l,min:z[0],className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm disabled:bg-slate-100"}),e[56]=s.start_date,e[57]=l,e[58]=k,e[59]=z[0],e[60]=D):D=e[60];let S;e[61]!==n.start_date?(S=n.start_date&&t.jsx("p",{className:"text-xs text-red-600 mt-1",children:n.start_date}),e[61]=n.start_date,e[62]=S):S=e[62];let E;e[63]!==s.start_date?(E=Me(s.start_date),e[63]=s.start_date,e[64]=E):E=e[64];let C;e[65]!==E?(C=t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:E}),e[65]=E,e[66]=C):C=e[66];let T;e[67]!==D||e[68]!==S||e[69]!==C?(T=t.jsxs("div",{children:[he,D,S,C]}),e[67]=D,e[68]=S,e[69]=C,e[70]=T):T=e[70];let ye;e[71]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Data zakończenia"}),e[71]=ye):ye=e[71];let U;e[72]!==r?(U=a=>r("end_date",a.target.value),e[72]=r,e[73]=U):U=e[73];let O;e[74]!==s.start_date?(O=s.start_date||new Date().toISOString().split("T")[0],e[74]=s.start_date,e[75]=O):O=e[75];let P;e[76]!==s.end_date||e[77]!==l||e[78]!==U||e[79]!==O?(P=t.jsx("input",{type:"date",value:s.end_date,onChange:U,disabled:l,min:O,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm disabled:bg-slate-100"}),e[76]=s.end_date,e[77]=l,e[78]=U,e[79]=O,e[80]=P):P=e[80];let L;e[81]!==n.end_date?(L=n.end_date&&t.jsx("p",{className:"text-xs text-red-600 mt-1",children:n.end_date}),e[81]=n.end_date,e[82]=L):L=e[82];let R;e[83]!==s.end_date?(R=Me(s.end_date),e[83]=s.end_date,e[84]=R):R=e[84];let A;e[85]!==R?(A=t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:R}),e[85]=R,e[86]=A):A=e[86];let F;e[87]!==P||e[88]!==L||e[89]!==A?(F=t.jsxs("div",{children:[ye,P,L,A]}),e[87]=P,e[88]=L,e[89]=A,e[90]=F):F=e[90];let I;e[91]!==T||e[92]!==F?(I=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T,F]}),e[91]=T,e[92]=F,e[93]=I):I=e[93];let ge;e[94]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx("p",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"Liczba dni roboczych"}),e[94]=ge):ge=e[94];let V;e[95]!==Re?(V=t.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4",children:[ge,t.jsx("p",{className:"text-3xl font-bold text-blue-900 mt-2",children:Re})]}),e[95]=Re,e[96]=V):V=e[96];let W;e[97]!==I||e[98]!==V?(W=t.jsxs("div",{className:"col-span-2 space-y-4",children:[I,V]}),e[97]=I,e[98]=V,e[99]=W):W=e[99];let je;e[100]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Rodzaj urlopu"}),e[100]=je):je=e[100];const Xe=s.leave_type;let B;e[101]!==r?(B=a=>r("leave_type",a.target.value),e[101]=r,e[102]=B):B=e[102];let we;e[103]===Symbol.for("react.memo_cache_sentinel")?(we=Object.entries(rt).map(dt),e[103]=we):we=e[103];let H;e[104]!==s.leave_type||e[105]!==l||e[106]!==B?(H=t.jsx("select",{value:Xe,onChange:B,disabled:l,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm disabled:bg-slate-100",children:we}),e[104]=s.leave_type,e[105]=l,e[106]=B,e[107]=H):H=e[107];let $;e[108]!==n.leave_type?($=n.leave_type&&t.jsx("p",{className:"text-xs text-red-600 mt-1",children:n.leave_type}),e[108]=n.leave_type,e[109]=$):$=e[109];let Y;e[110]!==H||e[111]!==$?(Y=t.jsxs("div",{children:[je,H,$]}),e[110]=H,e[111]=$,e[112]=Y):Y=e[112];let M;e[113]!==W||e[114]!==Y?(M=t.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[W,Y]}),e[113]=W,e[114]=Y,e[115]=M):M=e[115];let ve;e[116]===Symbol.for("react.memo_cache_sentinel")?(ve=t.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Opis / Uwagi"}),e[116]=ve):ve=e[116];let Z;e[117]!==r?(Z=a=>r("description",a.target.value),e[117]=r,e[118]=Z):Z=e[118];let q;e[119]!==s.description||e[120]!==l||e[121]!==Z?(q=t.jsx("textarea",{value:s.description,onChange:Z,disabled:l,placeholder:"Dodaj uwagi dotyczące wniosku...",rows:4,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none text-sm disabled:bg-slate-100"}),e[119]=s.description,e[120]=l,e[121]=Z,e[122]=q):q=e[122];let G;e[123]!==n.description?(G=n.description&&t.jsx("p",{className:"text-xs text-red-600 mt-1",children:n.description}),e[123]=n.description,e[124]=G):G=e[124];let J;e[125]!==q||e[126]!==G?(J=t.jsxs("div",{className:"mb-4",children:[ve,q,G]}),e[125]=q,e[126]=G,e[127]=J):J=e[127];let K;e[128]!==v||e[129]!==N||e[130]!==M||e[131]!==J?(K=t.jsxs("div",{className:"p-6",children:[v,N,M,J]}),e[128]=v,e[129]=N,e[130]=M,e[131]=J,e[132]=K):K=e[132];let Q;e[133]!==c||e[134]!==l?(Q=t.jsx("button",{onClick:c,disabled:l,className:"px-6 py-2 text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition font-medium text-sm disabled:opacity-50",children:"Anuluj"}),e[133]=c,e[134]=l,e[135]=Q):Q=e[135];const Ve=l||ne.length>0;let X;e[136]!==m?(X={backgroundColor:m},e[136]=m,e[137]=X):X=e[137];let Ne;e[138]===Symbol.for("react.memo_cache_sentinel")?(Ne=t.jsx(Ye,{icon:it}),e[138]=Ne):Ne=e[138];const We=l?"Wysyłanie...":"Wyślij wniosek";let ee;e[139]!==Le||e[140]!==Ve||e[141]!==X||e[142]!==We?(ee=t.jsxs("button",{onClick:Le,disabled:Ve,style:X,className:"px-6 py-2 text-white rounded-lg hover:opacity-90 transition font-medium flex items-center gap-2 text-sm disabled:opacity-50",children:[Ne,We]}),e[139]=Le,e[140]=Ve,e[141]=X,e[142]=We,e[143]=ee):ee=e[143];let te;e[144]!==Q||e[145]!==ee?(te=t.jsxs("div",{className:"bg-slate-50 border-t border-slate-200 px-6 py-4 flex gap-3 justify-end",children:[Q,ee]}),e[144]=Q,e[145]=ee,e[146]=te):te=e[146];let ke;return e[147]!==_||e[148]!==g||e[149]!==K||e[150]!==te?(ke=t.jsx("div",{className:"w-full max-w-2xl",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl overflow-hidden",style:_,children:[g,K,te]})}),e[147]=_,e[148]=g,e[149]=K,e[150]=te,e[151]=ke):ke=e[151],ke}function dt(i){const[e,o]=i;return t.jsx("option",{value:e,children:o},e)}function mt(i,e){return t.jsx("li",{className:"text-sm text-yellow-800",children:i},e)}function pt(i){console.log("Błędy walidacji:",i)}function ft(i,e){if(!i||!e)return 0;const o=new Date(i),c=new Date(e);let f=0;for(const ae=new Date(o);ae<=c;ae.setDate(ae.getDate()+1)){const u=ae.getDay();u!==0&&u!==6&&f++}return f}function ut(i){return i?new Date(i).toLocaleDateString("pl-PL"):"-"}export{ht as default};
