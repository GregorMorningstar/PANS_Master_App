import{c as rt,u as ot,b as bt,r as tt,j as a,a as Ie}from"./app-DvaQrBj5.js";import{X as st}from"./app-sidebar-layout-Sqm8IYV1.js";import{a as lt}from"./app-logo-icon-D94uS_gU.js";import{M as ht}from"./ModeratorLayout-CpgMHDdW.js";/* empty css            */import"./index-CySXUBmE.js";import"./index-Bc-c5Ken.js";import"./index-C4J_hXM0.js";import"./index-Bo-m__MM.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],gt=lt("Save",_t);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],jt=lt("Upload",xt);function vt(){const e=rt.c(177),n=ot(),r=n.props.machine;let i;e[0]!==n.props.departments?(i=n.props.departments??[],e[0]=n.props.departments,e[1]=i):i=e[1];const m=i;let d;e[2]!==n.props.users?(d=n.props.users??[],e[2]=n.props.users,e[3]=d):d=e[3];const p=d;let c;e[4]===Symbol.for("react.memo_cache_sentinel")?(c={active:"Aktywna",inactive:"Nieaktywna",maintenance:"Konserwacja",decommissioned:"Wycofana",working:"W pracy",forced_downtime:"Wymuszony przestój",breakdown:"Awaria"},e[4]=c):c=e[4];const b=c;let u;e[5]===Symbol.for("react.memo_cache_sentinel")?(u=s=>{const l=typeof s=="string"?s:s.value??String(s);return{value:l,label:b[l]??(typeof s=="string"?l:s.label??l)}},e[5]=u):u=e[5];const h=(n.props.machine_statuses??Object.keys(b)).map(u),f=r.name??"",Ae=r.model??"",Oe=r.serial_number??"",Re=r.year_of_production?String(r.year_of_production):"",Le=r.description??"",Te=r.status??"inactive",Ue=r.department_id?String(r.department_id):"",Be=r.user_id?String(r.user_id):"",He=r.image_path??"";let ne;e[6]!==Ue||e[7]!==Be||e[8]!==He||e[9]!==f||e[10]!==Ae||e[11]!==Oe||e[12]!==Re||e[13]!==Le||e[14]!==Te?(ne={name:f,model:Ae,serial_number:Oe,year_of_production:Re,description:Le,status:Te,department_id:Ue,user_id:Be,image:null,image_path:He},e[6]=Ue,e[7]=Be,e[8]=He,e[9]=f,e[10]=Ae,e[11]=Oe,e[12]=Re,e[13]=Le,e[14]=Te,e[15]=ne):ne=e[15];const t=bt(ne);let ie;e[16]===Symbol.for("react.memo_cache_sentinel")?(ie={},e[16]=ie):ie=e[16];const[o,le]=tt.useState(ie),[ce,at]=tt.useState(r.image_path?`/storage/${r.image_path}`:null);let me;e[17]!==t.data.name||e[18]!==t.data.serial_number||e[19]!==t.data.status||e[20]!==t.data.year_of_production?(me=()=>{const s={};return t.data.name.trim()||(s.name="Nazwa maszyny jest wymagana"),t.data.serial_number.trim()||(s.serial_number="Numer seryjny jest wymagany"),t.data.status||(s.status="Status jest wymagany"),t.data.year_of_production&&(isNaN(Number(t.data.year_of_production))||Number(t.data.year_of_production)<1900)&&(s.year_of_production="Rok produkcji musi być liczbą większą niż 1900"),le(s),Object.keys(s).length===0},e[17]=t.data.name,e[18]=t.data.serial_number,e[19]=t.data.status,e[20]=t.data.year_of_production,e[21]=me):me=e[21];const Ge=me;let de;e[22]!==t.data||e[23]!==r.id||e[24]!==Ge?(de=s=>{if(s.preventDefault(),!Ge())return;const l=new FormData;Object.entries(t.data).forEach(y=>{const[Pe,We]=y;Pe==="image"&&We===null||We!=null&&l.append(Pe,We)}),l.append("_method","PUT"),Ie.post(`/moderator/machines/${r.id}`,l,{onSuccess:Mt,onError:y=>{console.error("Errors:",y),le(y)}})},e[22]=t.data,e[23]=r.id,e[24]=Ge,e[25]=de):de=e[25];const Ze=de;let ue;e[26]!==t?(ue=s=>{const l=s.target.files?.[0];if(l){if(l.size>5242880){le(Et);return}if(!l.type.startsWith("image/")){le(Ct);return}t.setData("image",l);const y=new FileReader;y.onload=Pe=>{at(Pe.target?.result)},y.readAsDataURL(l),le(Dt)}},e[26]=t,e[27]=ue):ue=e[27];const Ve=ue;let fe;e[28]!==t||e[29]!==r.image_path?(fe=()=>{t.setData("image",null),at(r.image_path?`/storage/${r.image_path}`:null);const s=document.getElementById("image");s&&(s.value="")},e[28]=t,e[29]=r.image_path,e[30]=fe):fe=e[30];const Je=fe,_=zt;let pe,ye;e[31]!==t.recentlySuccessful?(pe=()=>{if(t.recentlySuccessful){const s=setTimeout(kt,1200);return()=>clearTimeout(s)}},ye=[t.recentlySuccessful],e[31]=t.recentlySuccessful,e[32]=pe,e[33]=ye):(pe=e[32],ye=e[33]),tt.useEffect(pe,ye);const nt="w-full max-w-4xl mx-auto bg-white rounded-lg shadow-md",it="p-6";let be;e[34]===Symbol.for("react.memo_cache_sentinel")?(be=a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Edytuj maszynę"}),e[34]=be):be=e[34];let he;e[35]===Symbol.for("react.memo_cache_sentinel")?(he=a.jsx(st,{className:"w-5 h-5"}),e[35]=he):he=e[35];let g;e[36]!==_?(g=a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[be,a.jsx("button",{onClick:_,className:"p-2 text-gray-500 hover:text-gray-700 rounded-md hover:bg-gray-100",children:he})]}),e[36]=_,e[37]=g):g=e[37];let x;e[38]!==t.recentlySuccessful?(x=t.recentlySuccessful&&a.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md",children:a.jsx("p",{className:"text-green-800",children:"Maszyna została pomyślnie zaktualizowana!"})}),e[38]=t.recentlySuccessful,e[39]=x):x=e[39];const ct="space-y-6",mt="grid grid-cols-1 md:grid-cols-2 gap-6";let _e;e[40]===Symbol.for("react.memo_cache_sentinel")?(_e=a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nazwa maszyny *"}),e[40]=_e):_e=e[40];let j;e[41]!==t?(j=s=>t.setData("name",s.target.value),e[41]=t,e[42]=j):j=e[42];const Ke=`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${o.name||t.errors.name?"border-red-300":"border-gray-300"}`;let v;e[43]!==t.data.name||e[44]!==j||e[45]!==Ke?(v=a.jsx("input",{type:"text",id:"name",value:t.data.name,onChange:j,className:Ke,placeholder:"Wprowadź nazwę maszyny"}),e[43]=t.data.name,e[44]=j,e[45]=Ke,e[46]=v):v=e[46];let N;e[47]!==o.name||e[48]!==t.errors?(N=(o.name||t.errors.name)&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.name||t.errors.name}),e[47]=o.name,e[48]=t.errors,e[49]=N):N=e[49];let w;e[50]!==v||e[51]!==N?(w=a.jsxs("div",{children:[_e,v,N]}),e[50]=v,e[51]=N,e[52]=w):w=e[52];let ge;e[53]===Symbol.for("react.memo_cache_sentinel")?(ge=a.jsx("label",{htmlFor:"model",className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),e[53]=ge):ge=e[53];let S;e[54]!==t?(S=s=>t.setData("model",s.target.value),e[54]=t,e[55]=S):S=e[55];let k;e[56]!==t.data.model||e[57]!==S?(k=a.jsxs("div",{children:[ge,a.jsx("input",{type:"text",id:"model",value:t.data.model,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Wprowadź model maszyny"})]}),e[56]=t.data.model,e[57]=S,e[58]=k):k=e[58];let xe;e[59]===Symbol.for("react.memo_cache_sentinel")?(xe=a.jsx("label",{htmlFor:"serial_number",className:"block text-sm font-medium text-gray-700 mb-1",children:"Numer seryjny *"}),e[59]=xe):xe=e[59];let z;e[60]!==t?(z=s=>t.setData("serial_number",s.target.value),e[60]=t,e[61]=z):z=e[61];const Xe=`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${o.serial_number||t.errors.serial_number?"border-red-300":"border-gray-300"}`;let D;e[62]!==t.data.serial_number||e[63]!==z||e[64]!==Xe?(D=a.jsx("input",{type:"text",id:"serial_number",value:t.data.serial_number,onChange:z,className:Xe,placeholder:"Wprowadź numer seryjny"}),e[62]=t.data.serial_number,e[63]=z,e[64]=Xe,e[65]=D):D=e[65];let C;e[66]!==o.serial_number||e[67]!==t.errors?(C=(o.serial_number||t.errors.serial_number)&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.serial_number||t.errors.serial_number}),e[66]=o.serial_number,e[67]=t.errors,e[68]=C):C=e[68];let E;e[69]!==D||e[70]!==C?(E=a.jsxs("div",{children:[xe,D,C]}),e[69]=D,e[70]=C,e[71]=E):E=e[71];let je;e[72]===Symbol.for("react.memo_cache_sentinel")?(je=a.jsx("label",{htmlFor:"year_of_production",className:"block text-sm font-medium text-gray-700 mb-1",children:"Rok produkcji"}),e[72]=je):je=e[72];const dt=t.data.year_of_production;let M;e[73]!==t?(M=s=>t.setData("year_of_production",s.target.value),e[73]=t,e[74]=M):M=e[74];const Ye=`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${o.year_of_production||t.errors.year_of_production?"border-red-300":"border-gray-300"}`;let ve;e[75]===Symbol.for("react.memo_cache_sentinel")?(ve=new Date().getFullYear(),e[75]=ve):ve=e[75];let F;e[76]!==t.data.year_of_production||e[77]!==M||e[78]!==Ye?(F=a.jsx("input",{type:"number",id:"year_of_production",value:dt,onChange:M,className:Ye,placeholder:"np. 2023",min:"1900",max:ve}),e[76]=t.data.year_of_production,e[77]=M,e[78]=Ye,e[79]=F):F=e[79];let $;e[80]!==o.year_of_production||e[81]!==t.errors?($=(o.year_of_production||t.errors.year_of_production)&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.year_of_production||t.errors.year_of_production}),e[80]=o.year_of_production,e[81]=t.errors,e[82]=$):$=e[82];let P;e[83]!==F||e[84]!==$?(P=a.jsxs("div",{children:[je,F,$]}),e[83]=F,e[84]=$,e[85]=P):P=e[85];let W;e[86]===Symbol.for("react.memo_cache_sentinel")?(W=a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),e[86]=W):W=e[86];const ut="status",ft=t.data.status;let I;e[87]!==t?(I=s=>t.setData("status",s.target.value),e[87]=t,e[88]=I):I=e[88];const qe=`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${o.status||t.errors.status?"border-red-300":"border-gray-300"}`,Qe=h.map(St);let A;e[89]!==t.data.status||e[90]!==I||e[91]!==qe||e[92]!==Qe?(A=a.jsx("select",{id:ut,value:ft,onChange:I,className:qe,children:Qe}),e[89]=t.data.status,e[90]=I,e[91]=qe,e[92]=Qe,e[93]=A):A=e[93];let O;e[94]!==o.status||e[95]!==t.errors?(O=(o.status||t.errors.status)&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.status||t.errors.status}),e[94]=o.status,e[95]=t.errors,e[96]=O):O=e[96];let R;e[97]!==W||e[98]!==A||e[99]!==O?(R=a.jsxs("div",{children:[W,A,O]}),e[97]=W,e[98]=A,e[99]=O,e[100]=R):R=e[100];let Ne;e[101]===Symbol.for("react.memo_cache_sentinel")?(Ne=a.jsx("label",{htmlFor:"department_id",className:"block text-sm font-medium text-gray-700 mb-1",children:"Dział"}),e[101]=Ne):Ne=e[101];const pt=t.data.department_id;let L;e[102]!==t?(L=s=>t.setData("department_id",s.target.value),e[102]=t,e[103]=L):L=e[103];let we;e[104]===Symbol.for("react.memo_cache_sentinel")?(we=a.jsx("option",{value:"",children:"Wybierz dział"}),e[104]=we):we=e[104];let T;e[105]!==m?(T=m.map(wt),e[105]=m,e[106]=T):T=e[106];let U;e[107]!==t.data.department_id||e[108]!==L||e[109]!==T?(U=a.jsxs("div",{children:[Ne,a.jsxs("select",{id:"department_id",value:pt,onChange:L,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[we,T]})]}),e[107]=t.data.department_id,e[108]=L,e[109]=T,e[110]=U):U=e[110];let Se;e[111]===Symbol.for("react.memo_cache_sentinel")?(Se=a.jsx("label",{htmlFor:"user_id",className:"block text-sm font-medium text-gray-700 mb-1",children:"Właściciel/Operator"}),e[111]=Se):Se=e[111];const yt=t.data.user_id;let B;e[112]!==t?(B=s=>t.setData("user_id",s.target.value),e[112]=t,e[113]=B):B=e[113];let ke;e[114]===Symbol.for("react.memo_cache_sentinel")?(ke=a.jsx("option",{value:"",children:"Wybierz użytkownika"}),e[114]=ke):ke=e[114];let H;e[115]!==p?(H=p.map(Nt),e[115]=p,e[116]=H):H=e[116];let G;e[117]!==t.data.user_id||e[118]!==B||e[119]!==H?(G=a.jsxs("div",{children:[Se,a.jsxs("select",{id:"user_id",value:yt,onChange:B,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[ke,H]})]}),e[117]=t.data.user_id,e[118]=B,e[119]=H,e[120]=G):G=e[120];let Z;e[121]!==w||e[122]!==k||e[123]!==E||e[124]!==P||e[125]!==R||e[126]!==U||e[127]!==G?(Z=a.jsxs("div",{className:mt,children:[w,k,E,P,R,U,G]}),e[121]=w,e[122]=k,e[123]=E,e[124]=P,e[125]=R,e[126]=U,e[127]=G,e[128]=Z):Z=e[128];let ze;e[129]===Symbol.for("react.memo_cache_sentinel")?(ze=a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Opis"}),e[129]=ze):ze=e[129];let V;e[130]!==t?(V=s=>t.setData("description",s.target.value),e[130]=t,e[131]=V):V=e[131];let J;e[132]!==t.data.description||e[133]!==V?(J=a.jsxs("div",{children:[ze,a.jsx("textarea",{id:"description",value:t.data.description,onChange:V,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Dodatkowe informacje o maszynie..."})]}),e[132]=t.data.description,e[133]=V,e[134]=J):J=e[134];let De;e[135]===Symbol.for("react.memo_cache_sentinel")?(De=a.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700 mb-1",children:"Zdjęcie maszyny"}),e[135]=De):De=e[135];let K;e[136]!==ce||e[137]!==Je?(K=ce&&a.jsxs("div",{className:"mb-4 relative inline-block",children:[a.jsx("img",{src:ce,alt:"Podgląd",className:"w-32 h-32 object-cover rounded-md border border-gray-300"}),a.jsx("button",{type:"button",onClick:Je,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600",children:a.jsx(st,{className:"w-4 h-4"})})]}),e[136]=ce,e[137]=Je,e[138]=K):K=e[138];let Ce,Ee;e[139]===Symbol.for("react.memo_cache_sentinel")?(Ce=a.jsx(jt,{className:"w-4 h-4"}),Ee=a.jsx("span",{children:"Wybierz plik"}),e[139]=Ce,e[140]=Ee):(Ce=e[139],Ee=e[140]);let X;e[141]!==Ve?(X=a.jsxs("label",{className:"cursor-pointer bg-white px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 flex items-center space-x-2",children:[Ce,Ee,a.jsx("input",{type:"file",id:"image",accept:"image/*",onChange:Ve,className:"hidden"})]}),e[141]=Ve,e[142]=X):X=e[142];let Y;e[143]!==t.data.image?(Y=t.data.image&&a.jsxs("span",{className:"text-sm text-green-600",children:["Plik wybrany: ",t.data.image.name]}),e[143]=t.data.image,e[144]=Y):Y=e[144];let q;e[145]!==X||e[146]!==Y?(q=a.jsxs("div",{className:"flex items-center space-x-4",children:[X,Y]}),e[145]=X,e[146]=Y,e[147]=q):q=e[147];let Q;e[148]!==o.image||e[149]!==t.errors?(Q=(o.image||t.errors.image)&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.image||t.errors.image}),e[148]=o.image,e[149]=t.errors,e[150]=Q):Q=e[150];let Me;e[151]===Symbol.for("react.memo_cache_sentinel")?(Me=a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Obsługiwane formaty: JPG, PNG, GIF. Maksymalny rozmiar: 5MB"}),e[151]=Me):Me=e[151];let ee;e[152]!==K||e[153]!==q||e[154]!==Q?(ee=a.jsxs("div",{children:[De,K,q,Q,Me]}),e[152]=K,e[153]=q,e[154]=Q,e[155]=ee):ee=e[155];let te;e[156]!==_?(te=a.jsx("button",{type:"button",onClick:_,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Anuluj"}),e[156]=_,e[157]=te):te=e[157];let Fe;e[158]===Symbol.for("react.memo_cache_sentinel")?(Fe=a.jsx(gt,{className:"w-4 h-4"}),e[158]=Fe):Fe=e[158];const et=t.processing?"Zapisywanie...":"Zapisz zmiany";let ae;e[159]!==et?(ae=a.jsx("span",{children:et}),e[159]=et,e[160]=ae):ae=e[160];let se;e[161]!==t.processing||e[162]!==ae?(se=a.jsxs("button",{type:"submit",disabled:t.processing,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[Fe,ae]}),e[161]=t.processing,e[162]=ae,e[163]=se):se=e[163];let re;e[164]!==te||e[165]!==se?(re=a.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t",children:[te,se]}),e[164]=te,e[165]=se,e[166]=re):re=e[166];let oe;e[167]!==Ze||e[168]!==Z||e[169]!==J||e[170]!==ee||e[171]!==re?(oe=a.jsxs("form",{onSubmit:Ze,className:ct,children:[Z,J,ee,re]}),e[167]=Ze,e[168]=Z,e[169]=J,e[170]=ee,e[171]=re,e[172]=oe):oe=e[172];let $e;return e[173]!==g||e[174]!==x||e[175]!==oe?($e=a.jsx("div",{className:nt,children:a.jsxs("div",{className:it,children:[g,x,oe]})}),e[173]=g,e[174]=x,e[175]=oe,e[176]=$e):$e=e[176],$e}function Nt(e){return a.jsx("option",{value:e.id,children:e.name},e.id)}function wt(e){return a.jsx("option",{value:e.id,children:e.name},e.id)}function St(e){return a.jsx("option",{value:e.value,children:e.label},e.value)}function kt(){Ie.visit("/moderator/machines")}function zt(){Ie.visit("/moderator/machines")}function Dt(e){const{image:n,...r}=e;return r}function Ct(e){return{...e,image:"Plik musi być obrazem"}}function Et(e){return{...e,image:"Plik nie może być większy niż 5MB"}}function Mt(){alert("Maszyna została zaktualizowana!"),Ie.visit("/moderator/machines")}function Tt(){const e=rt.c(9),r=ot().props.machine;let i,m;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={label:"Home",href:"/moderator"},m={label:"Panel sterowania maszyn",href:"/moderator/machines"},e[0]=i,e[1]=m):(i=e[0],m=e[1]);const d=`Edytuj: ${r?.name??"Maszyna"}`,p=`/moderator/machines/${r?.id}/edit`;let c;e[2]!==d||e[3]!==p?(c=[i,m,{label:d,href:p}],e[2]=d,e[3]=p,e[4]=c):c=e[4];const b=c,u=`Edytuj maszynę: ${r?.name??"Nieznana maszyna"}`;let h;e[5]===Symbol.for("react.memo_cache_sentinel")?(h=a.jsx("div",{className:"mt-6",children:a.jsx(vt,{})}),e[5]=h):h=e[5];let f;return e[6]!==b||e[7]!==u?(f=a.jsx(ht,{breadcrumbs:b,title:u,children:h}),e[6]=b,e[7]=u,e[8]=f):f=e[8],f}export{Tt as default};
