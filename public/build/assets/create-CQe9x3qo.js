import{c as ee,r as ae,b as re,j as r,u as ie}from"./app-DvaQrBj5.js";import{M as oe}from"./ModeratorLayout-CpgMHDdW.js";/* empty css            */import"./app-sidebar-layout-Sqm8IYV1.js";import"./app-logo-icon-D94uS_gU.js";import"./index-CySXUBmE.js";import"./index-Bc-c5Ken.js";import"./index-C4J_hXM0.js";import"./index-Bo-m__MM.js";function ne(a){const e=ee.c(86),{initialMachineId:d,machine:n}=a;let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u={},e[0]=u):u=e[0];const[p,c]=ae.useState(u);let b;e[1]===Symbol.for("react.memo_cache_sentinel")?(b={operation_name:"",description:"",duration_minutes:"",changeover_time:""},e[1]=b):b=e[1];const t=re(b);let h;e[2]!==t.data.changeover_time||e[3]!==t.data.duration_minutes||e[4]!==t.data.operation_name?(h=()=>{const o={};return(!t.data.operation_name||!t.data.operation_name.trim())&&(o.operation_name="Nazwa operacji jest wymagana."),t.data.duration_minutes&&(Number.isNaN(Number(t.data.duration_minutes))||Number(t.data.duration_minutes)<0)&&(o.duration_minutes="Czas trwania musi być liczbą >= 0."),t.data.changeover_time&&(Number.isNaN(Number(t.data.changeover_time))||Number(t.data.changeover_time)<0)&&(o.changeover_time="Czas przezbrojenia musi być liczbą >= 0."),c(o),Object.keys(o).length===0},e[2]=t.data.changeover_time,e[3]=t.data.duration_minutes,e[4]=t.data.operation_name,e[5]=h):h=e[5];const q=h;let f;e[6]!==t||e[7]!==d||e[8]!==q?(f=o=>{if(o.preventDefault(),c({}),!d){c({general:"Brak ID maszyny."});return}if(!q())return;const te=`/moderator/machines/operations/${d}`;t.post(te,{onError:W=>{const Y={};for(const G in W)Y[G]=Array.isArray(W[G])?W[G][0]:String(W[G]);c(Y)},onSuccess:()=>{t.reset(),c({})}})},e[6]=t,e[7]=d,e[8]=q,e[9]=f):f=e[9];const m=f;let s;e[10]!==p||e[11]!==t.errors?(s=o=>p[o]||t.errors[o],e[10]=p,e[11]=t.errors,e[12]=s):s=e[12];const i=s;let l;e[13]!==n?(l=n&&r.jsxs("span",{className:"text-gray-600",children:[" do maszyny: ",n.name]}),e[13]=n,e[14]=l):l=e[14];let g;e[15]!==l?(g=r.jsxs("h1",{className:"text-2xl font-semibold mb-4",children:["Dodaj operację",l]}),e[15]=l,e[16]=g):g=e[16];let _;e[17]!==i?(_=i("general")&&r.jsx("div",{className:"text-red-600 mb-4 p-3 bg-red-50 border border-red-200 rounded",children:i("general")}),e[17]=i,e[18]=_):_=e[18];let B;e[19]===Symbol.for("react.memo_cache_sentinel")?(B=r.jsx("label",{htmlFor:"operation_name",className:"block font-medium text-gray-700 mb-2",children:"Nazwa operacji *"}),e[19]=B):B=e[19];let x;e[20]!==t?(x=o=>t.setData("operation_name",o.target.value),e[20]=t,e[21]=x):x=e[21];const H=`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200 ${i("operation_name")?"border-red-500":"border-gray-300"}`;let j;e[22]!==t.data.operation_name||e[23]!==x||e[24]!==H?(j=r.jsx("input",{id:"operation_name",name:"operation_name",type:"text",value:t.data.operation_name,onChange:x,className:H,placeholder:"Np. Toczenie, Frezowanie, Wiercenie",required:!0}),e[22]=t.data.operation_name,e[23]=x,e[24]=H,e[25]=j):j=e[25];let y;e[26]!==i?(y=i("operation_name")&&r.jsx("div",{className:"text-red-600 text-sm mt-1",children:i("operation_name")}),e[26]=i,e[27]=y):y=e[27];let v;e[28]!==j||e[29]!==y?(v=r.jsxs("div",{children:[B,j,y]}),e[28]=j,e[29]=y,e[30]=v):v=e[30];let L;e[31]===Symbol.for("react.memo_cache_sentinel")?(L=r.jsx("label",{htmlFor:"description",className:"block font-medium text-gray-700 mb-2",children:"Opis"}),e[31]=L):L=e[31];let N;e[32]!==t?(N=o=>t.setData("description",o.target.value),e[32]=t,e[33]=N):N=e[33];const J=`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200 ${i("description")?"border-red-500":"border-gray-300"}`;let z;e[34]!==t.data.description||e[35]!==N||e[36]!==J?(z=r.jsx("textarea",{id:"description",name:"description",value:t.data.description,onChange:N,className:J,rows:3,placeholder:"Opcjonalny opis operacji"}),e[34]=t.data.description,e[35]=N,e[36]=J,e[37]=z):z=e[37];let w;e[38]!==i?(w=i("description")&&r.jsx("div",{className:"text-red-600 text-sm mt-1",children:i("description")}),e[38]=i,e[39]=w):w=e[39];let C;e[40]!==z||e[41]!==w?(C=r.jsxs("div",{children:[L,z,w]}),e[40]=z,e[41]=w,e[42]=C):C=e[42];let P;e[43]===Symbol.for("react.memo_cache_sentinel")?(P=r.jsx("label",{htmlFor:"duration_minutes",className:"block font-medium text-gray-700 mb-2",children:"Czas trwania (minuty)"}),e[43]=P):P=e[43];let k;e[44]!==t?(k=o=>t.setData("duration_minutes",o.target.value),e[44]=t,e[45]=k):k=e[45];const K=`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200 ${i("duration_minutes")?"border-red-500":"border-gray-300"}`;let S;e[46]!==t.data.duration_minutes||e[47]!==k||e[48]!==K?(S=r.jsx("input",{id:"duration_minutes",name:"duration_minutes",type:"number",min:0,step:"0.01",value:t.data.duration_minutes,onChange:k,className:K,placeholder:"0.00"}),e[46]=t.data.duration_minutes,e[47]=k,e[48]=K,e[49]=S):S=e[49];let D;e[50]!==i?(D=i("duration_minutes")&&r.jsx("div",{className:"text-red-600 text-sm mt-1",children:i("duration_minutes")}),e[50]=i,e[51]=D):D=e[51];let M;e[52]!==S||e[53]!==D?(M=r.jsxs("div",{children:[P,S,D]}),e[52]=S,e[53]=D,e[54]=M):M=e[54];let T;e[55]===Symbol.for("react.memo_cache_sentinel")?(T=r.jsx("label",{htmlFor:"changeover_time",className:"block font-medium text-gray-700 mb-2",children:"Czas przezbrojenia (min)"}),e[55]=T):T=e[55];let $;e[56]!==t?($=o=>t.setData("changeover_time",o.target.value),e[56]=t,e[57]=$):$=e[57];const Q=`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200 ${i("changeover_time")?"border-red-500":"border-gray-300"}`;let F;e[58]!==t.data.changeover_time||e[59]!==$||e[60]!==Q?(F=r.jsx("input",{id:"changeover_time",name:"changeover_time",type:"number",min:0,step:"0.01",value:t.data.changeover_time,onChange:$,className:Q,placeholder:"0.00"}),e[58]=t.data.changeover_time,e[59]=$,e[60]=Q,e[61]=F):F=e[61];let O;e[62]!==i?(O=i("changeover_time")&&r.jsx("div",{className:"text-red-600 text-sm mt-1",children:i("changeover_time")}),e[62]=i,e[63]=O):O=e[63];let A;e[64]!==F||e[65]!==O?(A=r.jsxs("div",{children:[T,F,O]}),e[64]=F,e[65]=O,e[66]=A):A=e[66];let E;e[67]!==M||e[68]!==A?(E=r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[M,A]}),e[67]=M,e[68]=A,e[69]=E):E=e[69];const X=t.processing?"Zapisywanie...":"Zapisz operację";let I;e[70]!==t.processing||e[71]!==X?(I=r.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:t.processing,children:X}),e[70]=t.processing,e[71]=X,e[72]=I):I=e[72];let U;e[73]===Symbol.for("react.memo_cache_sentinel")?(U=r.jsx("button",{type:"button",onClick:se,className:"bg-gray-600 text-white px-6 py-2 rounded-md hover:bg-gray-700 transition-colors",children:"Anuluj"}),e[73]=U):U=e[73];let R;e[74]!==I?(R=r.jsxs("div",{className:"flex gap-4 pt-4",children:[I,U]}),e[74]=I,e[75]=R):R=e[75];let Z;e[76]!==m||e[77]!==v||e[78]!==C||e[79]!==E||e[80]!==R?(Z=r.jsxs("form",{onSubmit:m,noValidate:!0,className:"space-y-4",children:[v,C,E,R]}),e[76]=m,e[77]=v,e[78]=C,e[79]=E,e[80]=R,e[81]=Z):Z=e[81];let V;return e[82]!==Z||e[83]!==g||e[84]!==_?(V=r.jsxs("div",{className:"p-6 bg-white border rounded-lg shadow-sm",children:[g,_,Z]}),e[82]=Z,e[83]=g,e[84]=_,e[85]=V):V=e[85],V}function se(){return window.history.back()}function ge(){const a=ee.c(17),e=ie(),d=e.props.machine_id,n=e.props.machine;let u,p,c;a[0]===Symbol.for("react.memo_cache_sentinel")?(u={label:"Dashboard",href:"/moderator/dashboard"},p={label:"Machines",href:"/moderator/machines"},c={label:"Operations",href:"/moderator/machines/operations"},a[0]=u,a[1]=p,a[2]=c):(u=a[0],p=a[1],c=a[2]);const b=`/moderator/machines/${d}/operations/create`;let t;a[3]!==b?(t=[u,p,c,{label:"Dodaj",href:b}],a[3]=b,a[4]=t):t=a[4];const h=t,q=ne,f=`Dodaj operację - ${n?.name||`Maszyna #${d}`}`;let m;a[5]!==n?(m=n&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("h2",{className:"font-medium text-blue-900",children:["Dodajesz operację do maszyny: ",r.jsx("span",{className:"font-bold",children:n.name}),n.model&&r.jsxs("span",{className:"text-sm text-blue-700",children:[" (Model: ",n.model,")"]})]})}),a[5]=n,a[6]=m):m=a[6];let s;a[7]!==n||a[8]!==d?(s=r.jsx(q,{initialMachineId:d,machine:n}),a[7]=n,a[8]=d,a[9]=s):s=a[9];let i;a[10]!==m||a[11]!==s?(i=r.jsxs("div",{className:"space-y-4",children:[m,s]}),a[10]=m,a[11]=s,a[12]=i):i=a[12];let l;return a[13]!==h||a[14]!==f||a[15]!==i?(l=r.jsx(oe,{breadcrumbs:h,title:f,children:i}),a[13]=h,a[14]=f,a[15]=i,a[16]=l):l=a[16],l}export{ge as default};
