import{c as Me,u as Ae,b as Fe,r as _e,j as a,a as Le}from"./app-6VWvmULT.js";import{M as Re}from"./moderator-machine-nav-menu-1zDHkRIq.js";import{M as Te}from"./ModeratorLayout-BuZ7YoP3.js";/* empty css            */import"./app-sidebar-layout-DRLK_nj4.js";import"./app-logo-icon-DrFhGwKx.js";import"./index-BCaWy0DS.js";import"./index-C2gJ1Fua.js";import"./index-C4J_hXM0.js";import"./index-DG9SYJJy.js";function We(){const e=Me.c(126),l=Ae();let B;e[0]!==l.props.departments?(B=l.props.departments??[],e[0]=l.props.departments,e[1]=B):B=e[1];const ue=B;let H;e[2]!==l.props.users?(H=l.props.users??[],e[2]=l.props.users,e[3]=H):H=e[3];const fe=H;let I;e[4]===Symbol.for("react.memo_cache_sentinel")?(I={active:"Aktywna",inactive:"Nieaktywna",maintenance:"Konserwacja",decommissioned:"Wycofana",working:"W pracy",forced_downtime:"Wymuszony przestój",breakdown:"Awaria"},e[4]=I):I=e[4];const ge=I;let K;e[5]===Symbol.for("react.memo_cache_sentinel")?(K=r=>{const s=typeof r=="string"?r:r.value??String(r);return{value:s,label:ge[s]??(typeof r=="string"?s:r.label??s)}},e[5]=K):K=e[5];const je=(l.props.machine_statuses??Object.keys(ge)).map(K),t=Fe({barcode:"",user_id:"",last_failure_date:"",image:null,image_path:"",year_of_production:"",name:"",model:"",serial_number:"",description:"",department_id:"",status:je[0]?.value??"inactive"});let V;e[6]===Symbol.for("react.memo_cache_sentinel")?(V={},e[6]=V):V=e[6];const[Z,ye]=_e.useState(V);let G;e[7]!==t?(G=()=>{if(t.recentlySuccessful){const r=setTimeout(()=>{t.reset()},1200);return()=>clearTimeout(r)}},e[7]=t,e[8]=G):G=e[8];let J;e[9]!==t.recentlySuccessful?(J=[t.recentlySuccessful],e[9]=t.recentlySuccessful,e[10]=J):J=e[10],_e.useEffect(G,J);let Q;e[11]!==t?(Q=function(s){s.preventDefault(),ye({});const de=[];if(String(t.data.name).trim()||de.push("name"),String(t.data.serial_number).trim()||de.push("serial_number"),de.length){const $={};de.forEach(me=>$[me]="To pole jest wymagane."),ye($);return}t.post("/moderator/machines/add-new",{forceFormData:!0,onSuccess:Ze,onError:()=>{const $=Object.keys(t.errors)[0];if($){const me=document.querySelector(`[name="${$}"]`);me&&me.scrollIntoView({behavior:"smooth",block:"center"})}},onFinish:Ue})},e[11]=t,e[12]=Q):Q=e[12];const pe=Q,ze="py-8",ve="max-w-3xl mx-auto",ke="bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl shadow-lg p-6 sm:p-8";let i,n;e[13]===Symbol.for("react.memo_cache_sentinel")?(i=a.jsx("h2",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:"Dodaj nową maszynę"}),n=a.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-1",children:"Wypełnij formularz, aby dodać maszynę do systemu."}),e[13]=i,e[14]=n):(i=e[13],n=e[14]);const we="mt-6 space-y-4";let X;e[15]===Symbol.for("react.memo_cache_sentinel")?(X=a.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-200",children:"Nazwa"}),e[15]=X):X=e[15];let c;e[16]!==t?(c=r=>t.setData("name",r.target.value),e[16]=t,e[17]=c):c=e[17];const be=!!(t.errors.name||Z.name);let o;e[18]!==t.data.name||e[19]!==c||e[20]!==be?(o=a.jsx("input",{value:t.data.name,onChange:c,className:"mt-1 w-full rounded-lg border px-3 py-2 bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800",placeholder:"np. Frezarka 2000","aria-invalid":be,required:!0}),e[18]=t.data.name,e[19]=c,e[20]=be,e[21]=o):o=e[21];let d;e[22]!==Z||e[23]!==t.errors.name?(d=(t.errors.name||Z.name)&&a.jsx("div",{className:"text-sm text-red-600 mt-1",children:t.errors.name??Z.name}),e[22]=Z,e[23]=t.errors.name,e[24]=d):d=e[24];let m;e[25]!==o||e[26]!==d?(m=a.jsxs("div",{children:[X,o,d]}),e[25]=o,e[26]=d,e[27]=m):m=e[27];let Y;e[28]===Symbol.for("react.memo_cache_sentinel")?(Y=a.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-200",children:"Numer seryjny"}),e[28]=Y):Y=e[28];let u;e[29]!==t?(u=r=>t.setData("serial_number",r.target.value),e[29]=t,e[30]=u):u=e[30];let f;e[31]!==t.data.serial_number||e[32]!==u?(f=a.jsx("input",{value:t.data.serial_number,onChange:u,className:"mt-1 w-full rounded-lg border px-3 py-2 bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800",placeholder:"np. SN-123456",required:!0}),e[31]=t.data.serial_number,e[32]=u,e[33]=f):f=e[33];let p;e[34]!==t.errors.serial_number?(p=t.errors.serial_number&&a.jsx("div",{className:"text-sm text-red-600 mt-1",children:t.errors.serial_number}),e[34]=t.errors.serial_number,e[35]=p):p=e[35];let b;e[36]!==f||e[37]!==p?(b=a.jsxs("div",{children:[Y,f,p]}),e[36]=f,e[37]=p,e[38]=b):b=e[38];let ee;e[39]===Symbol.for("react.memo_cache_sentinel")?(ee=a.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-200",children:"Model"}),e[39]=ee):ee=e[39];let x;e[40]!==t?(x=r=>t.setData("model",r.target.value),e[40]=t,e[41]=x):x=e[41];let h;e[42]!==t.data.model||e[43]!==x?(h=a.jsxs("div",{children:[ee,a.jsx("input",{value:t.data.model,onChange:x,className:"mt-1 w-full rounded-lg border px-3 py-2 bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800"})]}),e[42]=t.data.model,e[43]=x,e[44]=h):h=e[44];let te;e[45]===Symbol.for("react.memo_cache_sentinel")?(te=a.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-200",children:"Rok produkcji"}),e[45]=te):te=e[45];let g;e[46]!==t?(g=r=>t.setData("year_of_production",r.target.value),e[46]=t,e[47]=g):g=e[47];let j;e[48]!==t.data.year_of_production||e[49]!==g?(j=a.jsxs("div",{children:[te,a.jsx("input",{type:"number",value:t.data.year_of_production,onChange:g,className:"mt-1 w-full rounded-lg border px-3 py-2 bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800"})]}),e[48]=t.data.year_of_production,e[49]=g,e[50]=j):j=e[50];let y;e[51]!==h||e[52]!==j?(y=a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h,j]}),e[51]=h,e[52]=j,e[53]=y):y=e[53];let ae;e[54]===Symbol.for("react.memo_cache_sentinel")?(ae=a.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-200",children:"Opis"}),e[54]=ae):ae=e[54];let _;e[55]!==t?(_=r=>t.setData("description",r.target.value),e[55]=t,e[56]=_):_=e[56];let z;e[57]!==t.data.description||e[58]!==_?(z=a.jsxs("div",{children:[ae,a.jsx("textarea",{value:t.data.description,onChange:_,className:"mt-1 w-full rounded-lg border px-3 py-2 bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800",rows:3})]}),e[57]=t.data.description,e[58]=_,e[59]=z):z=e[59];const Ne="grid grid-cols-1 sm:grid-cols-2 gap-4";let re;e[60]===Symbol.for("react.memo_cache_sentinel")?(re=a.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-200",children:"Departament"}),e[60]=re):re=e[60];const Se=t.data.department_id;let v;e[61]!==t?(v=r=>t.setData("department_id",r.target.value),e[61]=t,e[62]=v):v=e[62];let se;e[63]===Symbol.for("react.memo_cache_sentinel")?(se=a.jsx("option",{value:"",children:"-- wybierz --"}),e[63]=se):se=e[63];let k;e[64]!==ue?(k=ue.map(Pe),e[64]=ue,e[65]=k):k=e[65];let w;e[66]!==t.data.department_id||e[67]!==v||e[68]!==k?(w=a.jsxs("div",{children:[re,a.jsxs("select",{value:Se,onChange:v,className:"mt-1 w-full rounded-lg border px-3 py-2 bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800",children:[se,k]})]}),e[66]=t.data.department_id,e[67]=v,e[68]=k,e[69]=w):w=e[69];let N;e[70]===Symbol.for("react.memo_cache_sentinel")?(N=a.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-200",children:"Status"}),e[70]=N):N=e[70];const De=t.data.status;let S;e[71]!==t?(S=r=>t.setData("status",r.target.value),e[71]=t,e[72]=S):S=e[72];const Ce="mt-1 w-full rounded-lg border px-3 py-2 bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800",xe=je.map(qe);let D;e[73]!==t.data.status||e[74]!==S||e[75]!==xe?(D=a.jsx("select",{value:De,onChange:S,className:Ce,children:xe}),e[73]=t.data.status,e[74]=S,e[75]=xe,e[76]=D):D=e[76];let C;e[77]!==N||e[78]!==D?(C=a.jsxs("div",{children:[N,D]}),e[77]=N,e[78]=D,e[79]=C):C=e[79];let E;e[80]!==w||e[81]!==C?(E=a.jsxs("div",{className:Ne,children:[w,C]}),e[80]=w,e[81]=C,e[82]=E):E=e[82];let le;e[83]===Symbol.for("react.memo_cache_sentinel")?(le=a.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-200",children:"Przypisz użytkownika (opcjonalnie)"}),e[83]=le):le=e[83];const Ee=t.data.user_id;let M;e[84]!==t?(M=r=>t.setData("user_id",r.target.value),e[84]=t,e[85]=M):M=e[85];let ie;e[86]===Symbol.for("react.memo_cache_sentinel")?(ie=a.jsx("option",{value:"",children:"-- brak --"}),e[86]=ie):ie=e[86];let A;e[87]!==fe?(A=fe.map(Oe),e[87]=fe,e[88]=A):A=e[88];let F;e[89]!==t.data.user_id||e[90]!==M||e[91]!==A?(F=a.jsxs("div",{children:[le,a.jsxs("select",{value:Ee,onChange:M,className:"mt-1 w-full rounded-lg border px-3 py-2 bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800",children:[ie,A]})]}),e[89]=t.data.user_id,e[90]=M,e[91]=A,e[92]=F):F=e[92];let ne;e[93]===Symbol.for("react.memo_cache_sentinel")?(ne=a.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-200",children:"Zdjęcie (upload)"}),e[93]=ne):ne=e[93];let L;e[94]!==t?(L=a.jsx("input",{type:"file",accept:"image/*",onChange:r=>{const s=r.target.files&&r.target.files[0]?r.target.files[0]:null;t.setData("image",s),s?t.setData("image_path",s.name):t.setData("image_path","")},className:"mt-1 w-full rounded-lg border px-3 py-2 bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800"}),e[94]=t,e[95]=L):L=e[95];let R;e[96]!==t.data.image?(R=t.data.image&&a.jsx("div",{className:"mt-2",children:a.jsx("img",{src:URL.createObjectURL(t.data.image),alt:"preview",className:"h-20 w-auto rounded-md object-cover border"})}),e[96]=t.data.image,e[97]=R):R=e[97];let T;e[98]!==L||e[99]!==R?(T=a.jsxs("div",{children:[ne,L,R]}),e[98]=L,e[99]=R,e[100]=T):T=e[100];let W;e[101]!==F||e[102]!==T?(W=a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[F,T]}),e[101]=F,e[102]=T,e[103]=W):W=e[103];let ce;e[104]===Symbol.for("react.memo_cache_sentinel")?(ce=a.jsx("i",{className:"fa fa-upload","aria-hidden":"true"}),e[104]=ce):ce=e[104];const he=t.processing?" Zapisywanie...":" Dodaj maszynę";let O;e[105]!==t.processing||e[106]!==he?(O=a.jsxs("button",{type:"submit",disabled:t.processing,className:"inline-flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg disabled:opacity-60",children:[ce,he]}),e[105]=t.processing,e[106]=he,e[107]=O):O=e[107];let q;e[108]!==t.recentlySuccessful?(q=a.jsx("div",{className:"min-w-[8rem] text-right",children:t.recentlySuccessful?a.jsx("span",{className:"text-green-600 font-medium",children:"Zapisano"}):a.jsx("span",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Wypełnij formularz i zapisz"})}),e[108]=t.recentlySuccessful,e[109]=q):q=e[109];let P;e[110]!==O||e[111]!==q?(P=a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[O,q]}),e[110]=O,e[111]=q,e[112]=P):P=e[112];let U;e[113]!==pe||e[114]!==m||e[115]!==b||e[116]!==y||e[117]!==z||e[118]!==E||e[119]!==W||e[120]!==P?(U=a.jsxs("form",{onSubmit:pe,className:we,children:[m,b,y,z,E,W,P]}),e[113]=pe,e[114]=m,e[115]=b,e[116]=y,e[117]=z,e[118]=E,e[119]=W,e[120]=P,e[121]=U):U=e[121];let oe;return e[122]!==i||e[123]!==n||e[124]!==U?(oe=a.jsx("div",{className:ze,children:a.jsx("div",{className:ve,children:a.jsxs("div",{className:ke,children:[i,n,U]})})}),e[122]=i,e[123]=n,e[124]=U,e[125]=oe):oe=e[125],oe}function Oe(e){return a.jsx("option",{value:e.id,children:e.name},e.id)}function qe(e){return a.jsx("option",{value:e.value,children:e.label},e.value)}function Pe(e){return a.jsx("option",{value:e.id,children:e.name},e.id)}function Ue(){}function Ze(){Le.get("/moderator/machines")}function Ye(){const e=[{label:"Home",href:"/moderator"},{label:"Panel sterowania maszyn",href:"/moderator/machines"},{label:"Dodaj nową maszynę",href:"/moderator/machines/add-new"}];return a.jsxs(Te,{breadcrumbs:e,title:"Dodaj nową maszynę",children:[a.jsx(Re,{}),a.jsx(We,{})]})}export{Ye as default};
