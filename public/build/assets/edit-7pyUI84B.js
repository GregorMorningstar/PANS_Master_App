import{c as q,b as K,r as Q,j as r,u as T}from"./app-DvaQrBj5.js";import{M as U}from"./ModeratorLayout-CpgMHDdW.js";/* empty css            */import"./app-sidebar-layout-Sqm8IYV1.js";import"./app-logo-icon-D94uS_gU.js";import"./index-CySXUBmE.js";import"./index-Bc-c5Ken.js";import"./index-C4J_hXM0.js";import"./index-Bo-m__MM.js";function V(i){const e=q.c(43),{machineId:d,editFailure:n}=i,u=d??"",a=n?.failure_rank??1,w=n?.failure_description??"";let s;e[0]!==u||e[1]!==a||e[2]!==w?(s={machine_id:u,failure_rank:a,failure_description:w},e[0]=u,e[1]=a,e[2]=w,e[3]=s):s=e[3];const{data:t,setData:m,put:R,processing:F,errors:O}=K(s),[D,I]=Q.useState(null);let S;e[4]===Symbol.for("react.memo_cache_sentinel")?(S={r:255,g:213,b:79},e[4]=S):S=e[4];const f=S;let M;if(e[5]===Symbol.for("react.memo_cache_sentinel")){const o={r:211,g:47,b:47};M=function(c){const L=c/9,H=Math.round(f.r+(o.r-f.r)*L),G=Math.round(f.g+(o.g-f.g)*L),J=Math.round(f.b+(o.b-f.b)*L);return`rgb(${H}, ${G}, ${J})`},e[5]=M}else M=e[5];const B=M;let E;e[6]!==O?(E=o=>{const l=O[o];return l?r.jsx("div",{className:"text-red-600",children:Array.isArray(l)?l.join(" "):String(l)}):null},e[6]=O,e[7]=E):E=e[7];const p=E;let N;e[8]!==n.id||e[9]!==R?(N=function(l){l.preventDefault(),R(`/machines/failures/edit/${n.id}`)},e[8]=n.id,e[9]=R,e[10]=N):N=e[10];const P=N;let $,z;e[11]===Symbol.for("react.memo_cache_sentinel")?(z=r.jsx("label",{className:"block mb-1 font-medium",children:"Ocena awarii"}),$=Array.from({length:10}),e[11]=$,e[12]=z):($=e[11],z=e[12]);let h;e[13]!==t.failure_rank||e[14]!==D||e[15]!==m?(h=r.jsx("div",{children:$.map((o,l)=>{const c=l+1,H=c<=(D??t.failure_rank)?B(l):"#e0e0e0";return r.jsx("span",{onMouseEnter:()=>I(c),onMouseLeave:()=>I(null),onClick:()=>m("failure_rank",c),style:{cursor:"pointer",color:H,fontSize:24,transition:"color 120ms",marginRight:4},"aria-label":`${c} gwiazdek`,children:"★"},c)})}),e[13]=t.failure_rank,e[14]=D,e[15]=m,e[16]=h):h=e[16];let b;e[17]!==p?(b=p("failure_rank"),e[17]=p,e[18]=b):b=e[18];let _;e[19]!==h||e[20]!==b?(_=r.jsxs("div",{className:"mb-3",children:[z,h,b]}),e[19]=h,e[20]=b,e[21]=_):_=e[21];let A;e[22]===Symbol.for("react.memo_cache_sentinel")?(A=r.jsx("label",{className:"block mb-1 font-medium",children:"Opis usterki"}),e[22]=A):A=e[22];let x;e[23]!==m?(x=o=>m("failure_description",o.target.value),e[23]=m,e[24]=x):x=e[24];let j;e[25]!==t.failure_description||e[26]!==x?(j=r.jsx("textarea",{value:t.failure_description,onChange:x,rows:6,className:"w-full border rounded p-2",placeholder:"Opisz usterkę (co się dzieje, kiedy występuje, jak ją odtworzyć)"}),e[25]=t.failure_description,e[26]=x,e[27]=j):j=e[27];let y;e[28]!==p?(y=p("failure_description"),e[28]=p,e[29]=y):y=e[29];let g;e[30]!==j||e[31]!==y?(g=r.jsxs("div",{className:"mb-3",children:[A,j,y]}),e[30]=j,e[31]=y,e[32]=g):g=e[32];let k;e[33]!==t.machine_id?(k=r.jsx("input",{type:"hidden",value:t.machine_id}),e[33]=t.machine_id,e[34]=k):k=e[34];let v;e[35]!==F?(v=r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:F,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Edytuj awarię"})}),e[35]=F,e[36]=v):v=e[36];let C;return e[37]!==P||e[38]!==_||e[39]!==g||e[40]!==k||e[41]!==v?(C=r.jsxs("form",{onSubmit:P,className:"p-4",children:[_,g,k,v]}),e[37]=P,e[38]=_,e[39]=g,e[40]=k,e[41]=v,e[42]=C):C=e[42],C}function se(){const i=q.c(5),d=T().props,n=d?.auth?.user?.role??"",u=String(n).toLowerCase();let a;i[0]===Symbol.for("react.memo_cache_sentinel")?(a=[{label:"Moderator",href:"/moderator"},{label:"Maszyny",href:"/machines"},{label:"Lista Awarii",href:"/machines/report-failure"},{label:"Edytuj Awarię",href:""}],i[0]=a):a=i[0];const w=a;if(u==="moderator"){let t;return i[1]!==d?(t=r.jsx(U,{breadcrumbs:w,title:"Lista Awarii",children:r.jsx(V,{...d})}),i[1]=d,i[2]=t):t=i[2],t}if(u==="employee"){let t;return i[3]===Symbol.for("react.memo_cache_sentinel")?(t=r.jsx("div",{children:"2"}),i[3]=t):t=i[3],t}let s;return i[4]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx("div",{}),i[4]=s):s=i[4],s}export{se as default};
